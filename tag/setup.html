<!DOCTYPE html>
<html lang="en">
<head>
		<title>Maps & Apps &mdash; Articles tagged setup</title>
		<meta charset="utf-8" />
		<link rel="profile" href="http://gmpg.org/xfn/11" />
		<link rel="stylesheet" type="text/css" href="/theme/css/style.css" />
		<link rel='stylesheet' id='oswald-css'  href='http://fonts.googleapis.com/css?family=Oswald&#038;ver=3.3.2' type='text/css' media='all' />
		<style type="text/css">
			body.custom-background { background-color: #f5f5f5; }
		</style>
		<link rel="alternate" type="application/atom+xml"
			title="Maps & Apps â€” Flux Atom"
			href="/" /> 
		<!--[if lte IE 8]><script src="/theme/js/html5shiv.js"></script><![endif]-->
</head>

<body class="home blog custom-background " >
	<div id="container">
		<div id="header">
				<h1 id="site-title"><a href="">Maps & Apps</a></h1>
		</div><!-- /#banner -->
		
		<div id="menu">
			<div class="menu-navigation-container">
				<ul id="menu-navigation" class="menu">
						<li class="active" class="menu-item menu-item-type-post_type menu-item-object-page"><a href="/category/.html"></a></li>
						<li class="menu-item menu-item-type-post_type menu-item-object-page"><a href="/category/latex.html">LaTeX</a></li>
						<li class="menu-item menu-item-type-post_type menu-item-object-page"><a href="/category/leaflet.html">Leaflet</a></li>
						<li class="menu-item menu-item-type-post_type menu-item-object-page"><a href="/category/r.html">R</a></li>
						<li  class="active" class="menu-item menu-item-type-post_type menu-item-object-page"><a href="http://mollietaylor.com/">About Mollie Link Will Go Here</a></li>

				</ul>
			</div> <!--/#menu-navigation-container-->
		</div><!-- /#menu -->
		
		<div class="page-title">
<div class="page-title">
	<h2>Tagged with <span>setup</span> &hellip;</h2>
</div>
		</div>
	
		<div id="contents">
<div class="post type-post status-publish format-standard hentry category-general" id="post">
	<div class="entry-meta">
		<div class="date"><a href="/2013/09/truncate-by-delimiter-in-r.html">Thu 19 September 2013</a></div>
		<span class="byline">By <a href="/author/mollie-taylor.html">Mollie Taylor</a></span>
			<span class="cat-links"><a href="/category/r.html" title="View all posts in R" rel="category tag">R</a></span>
	</div> <!-- /#entry-meta -->
	<div class="main">
		<h2 class="entry-title">
			<a href="/2013/09/truncate-by-delimiter-in-r.html" title="Permalink to Truncate by Delimiter in R" rel="bookmark">Truncate by Delimiter in R</a>
		</h2>
		<div class="entry-content">
			<p>Sometimes, you only need to analyze part of the data stored as a vector. In this example, there is a list of patents. Each patent has been assigned to one or more patent classes. Let's say that we want to analyze the dataset based on only the first patent class listed for each patent.</p>
<div class="highlight"><pre>patents <span class="o">&lt;-</span> <span class="kt">data.frame</span><span class="p">(</span>
    patent <span class="o">=</span> <span class="m">1</span><span class="o">:</span><span class="m">30</span><span class="p">,</span>
    class <span class="o">=</span> <span class="kt">c</span><span class="p">(</span><span class="s">&quot;405&quot;</span><span class="p">,</span> <span class="s">&quot;33/209&quot;</span><span class="p">,</span> <span class="s">&quot;549/514&quot;</span><span class="p">,</span> <span class="s">&quot;110&quot;</span><span class="p">,</span> <span class="s">&quot;540&quot;</span><span class="p">,</span> <span class="s">&quot;43&quot;</span><span class="p">,</span> 
    <span class="s">&quot;315/327&quot;</span><span class="p">,</span> <span class="s">&quot;540&quot;</span><span class="p">,</span> <span class="s">&quot;536/514&quot;</span><span class="p">,</span> <span class="s">&quot;523/522&quot;</span><span class="p">,</span> <span class="s">&quot;315&quot;</span><span class="p">,</span> 
    <span class="s">&quot;138/248/285&quot;</span><span class="p">,</span> <span class="s">&quot;24&quot;</span><span class="p">,</span> <span class="s">&quot;365&quot;</span><span class="p">,</span> <span class="s">&quot;73/116/137&quot;</span><span class="p">,</span> <span class="s">&quot;73/200&quot;</span><span class="p">,</span> 
    <span class="s">&quot;252/508&quot;</span><span class="p">,</span> <span class="s">&quot;96/261&quot;</span><span class="p">,</span> <span class="s">&quot;327/318&quot;</span><span class="p">,</span> <span class="s">&quot;426/424/512&quot;</span><span class="p">,</span> 
    <span class="s">&quot;75/423&quot;</span><span class="p">,</span> <span class="s">&quot;430&quot;</span><span class="p">,</span> <span class="s">&quot;416&quot;</span><span class="p">,</span> <span class="s">&quot;536/423/530&quot;</span><span class="p">,</span> <span class="s">&quot;381/181&quot;</span><span class="p">,</span> <span class="s">&quot;4&quot;</span><span class="p">,</span> 
    <span class="s">&quot;340/187&quot;</span><span class="p">,</span> <span class="s">&quot;423/75&quot;</span><span class="p">,</span> <span class="s">&quot;360/392/G9B&quot;</span><span class="p">,</span> <span class="s">&quot;524/106/423&quot;</span><span class="p">))</span>
</pre></div>


<p>We can use <a href="http://en.wikipedia.org/wiki/Regular_expression">regular expressions</a> to truncate each element of the vector just before the first "/".</p>
<p><code>grep</code>,<code>grepl</code>,<code>sub</code>,<code>gsub</code>,<code>regexpr</code>,<code>gregexpr</code>, and <code>regexec</code> are all functions in the <strong>base</strong> package that allow you to use regular expressions within each element of a character vector. <code>sub</code> and <code>gsub</code> allow you to replace within each element of the vector. <code>sub</code> replaces the first match within each element, while <code>gsub</code> replaces all matches within each element. In this case, we want to remove everything from the first "/" on, and we want to replace it with nothing. Here's how we can use <code>sub</code> to do that:</p>
<div class="highlight"><pre>patents<span class="o">$</span>primaryClass <span class="o">&lt;-</span> <span class="kp">sub</span><span class="p">(</span><span class="s">&quot;/.*&quot;</span><span class="p">,</span> <span class="s">&quot;&quot;</span><span class="p">,</span> patents<span class="o">$</span><span class="kp">class</span><span class="p">)</span>

<span class="o">&gt;</span> <span class="kp">table</span><span class="p">(</span>patents<span class="o">$</span>primaryClass<span class="p">)</span>

<span class="m">110</span> <span class="m">138</span>  <span class="m">24</span> <span class="m">252</span> <span class="m">315</span> <span class="m">327</span>  <span class="m">33</span> <span class="m">340</span> <span class="m">360</span> <span class="m">365</span> <span class="m">381</span>   <span class="m">4</span> <span class="m">405</span> <span class="m">416</span> <span class="m">423</span> <span class="m">426</span>  <span class="m">43</span> <span class="m">430</span> <span class="m">523</span> <span class="m">524</span> 
  <span class="m">1</span>   <span class="m">1</span>   <span class="m">1</span>   <span class="m">1</span>   <span class="m">2</span>   <span class="m">1</span>   <span class="m">1</span>   <span class="m">1</span>   <span class="m">1</span>   <span class="m">1</span>   <span class="m">1</span>   <span class="m">1</span>   <span class="m">1</span>   <span class="m">1</span>   <span class="m">1</span>   <span class="m">1</span>   <span class="m">1</span>   <span class="m">1</span>   <span class="m">1</span>   <span class="m">1</span> 
<span class="m">536</span> <span class="m">540</span> <span class="m">549</span>  <span class="m">73</span>  <span class="m">75</span>  <span class="m">96</span> 
  <span class="m">2</span>   <span class="m">2</span>   <span class="m">1</span>   <span class="m">2</span>   <span class="m">1</span>   <span class="m">1</span>
</pre></div>


<blockquote>
<p>This post is one part of my series on Text to Columns.</p>
</blockquote>
<h2>Citations and Further Reading</h2>
<ul>
<li><a href="http://www.cheatography.com/davechild/cheat-sheets/regular-expressions/">Regular Expressions Cheat Sheet</a></li>
</ul>
		</div> <!--/#entry-content-->
    		<span class="tag-links"><strong>Tagged</strong>
 <a href="/tag/cleaning.html" rel="tag">cleaning</a>,  <a href="/tag/r.html" rel="tag">R</a>,  <a href="/tag/regular-expressions.html" rel="tag">regular expressions</a>,  <a href="/tag/series-text-to-columns.html" rel="tag">Series: Text to Columns</a>,  <a href="/tag/setup.html" rel="tag">setup</a>,  <a href="/tag/sub.html" rel="tag">sub</a>    		</span>
	</div> <!--/#main-->
</div>  <!--/#post--><div class="post type-post status-publish format-standard hentry category-general" id="post">
	<div class="entry-meta">
		<div class="date"><a href="/2013/09/only-load-data-if-not-already-open-in-r.html">Thu 12 September 2013</a></div>
		<span class="byline">By <a href="/author/mollie-taylor.html">Mollie Taylor</a></span>
			<span class="cat-links"><a href="/category/r.html" title="View all posts in R" rel="category tag">R</a></span>
	</div> <!-- /#entry-meta -->
	<div class="main">
		<h2 class="entry-title">
			<a href="/2013/09/only-load-data-if-not-already-open-in-r.html" title="Permalink to Only Load Data If Not Already Open in R" rel="bookmark">Only Load Data If Not Already Open in R</a>
		</h2>
		<div class="entry-content">
			<p>I often find it beneficial to check to see whether or not a dataset is already loaded into R at the beginning of a file. This is particularly helpful when I'm dealing with a large file that I don't want to load repeatedly, and when I might be using the same dataset with multiple R scripts or re-running the same script while making changes to the code.</p>
<p>To check to see if an object with that name is already loaded, we can use the <code>exists</code> function from the <strong>base</strong> package. We can then wrap our <code>read.csv</code> command with an <code>if</code> statement to cause the file to only load if an object with that name is not already loaded.</p>
<div class="highlight"><pre><span class="kr">if</span><span class="p">(</span><span class="o">!</span><span class="kp">exists</span><span class="p">(</span><span class="s">&quot;largeData&quot;</span><span class="p">))</span> <span class="p">{</span>
    largeData <span class="o">&lt;-</span> read.csv<span class="p">(</span><span class="s">&quot;huge-file.csv&quot;</span><span class="p">,</span>
        header <span class="o">=</span> <span class="kc">TRUE</span><span class="p">)</span>
<span class="p">}</span>
</pre></div>


<p>You will probably also find it useful to use the "<a href="/2013/09/using-colclasses-to-load-data-more.html">colClasses</a>" option of <code>read.csv</code> or <code>read.table</code> to help the file load faster and make sure your data are in the right format. For example:</p>
<div class="highlight"><pre><span class="kr">if</span><span class="p">(</span><span class="o">!</span><span class="kp">exists</span><span class="p">(</span><span class="s">&quot;largeData&quot;</span><span class="p">))</span> <span class="p">{</span>
    largeData <span class="o">&lt;-</span> read.csv<span class="p">(</span><span class="s">&quot;huge-file.csv&quot;</span><span class="p">,</span>
        header <span class="o">=</span> <span class="kc">TRUE</span><span class="p">,</span>
        colClasses <span class="o">=</span> <span class="kt">c</span><span class="p">(</span><span class="s">&quot;factor&quot;</span><span class="p">,</span> <span class="s">&quot;integer&quot;</span><span class="p">,</span> <span class="s">&quot;character&quot;</span><span class="p">,</span> <span class="s">&quot;integer&quot;</span><span class="p">,</span> 
            <span class="s">&quot;integer&quot;</span><span class="p">,</span> <span class="s">&quot;character&quot;</span><span class="p">))</span>
<span class="p">}</span>
</pre></div>


<blockquote>
<p>This post is one part of my series on dealing with large datasets.</p>
</blockquote>
		</div> <!--/#entry-content-->
    		<span class="tag-links"><strong>Tagged</strong>
 <a href="/tag/exists.html" rel="tag">exists</a>,  <a href="/tag/if.html" rel="tag">if</a>,  <a href="/tag/r.html" rel="tag">R</a>,  <a href="/tag/readcsv.html" rel="tag">read.csv</a>,  <a href="/tag/readtable.html" rel="tag">read.table</a>,  <a href="/tag/series-large-data.html" rel="tag">Series: Large Data</a>,  <a href="/tag/setup.html" rel="tag">setup</a>    		</span>
	</div> <!--/#main-->
</div>  <!--/#post--><div class="post type-post status-publish format-standard hentry category-general" id="post">
	<div class="entry-meta">
		<div class="date"><a href="/2013/09/using-colclasses-to-load-data-more.html">Thu 05 September 2013</a></div>
		<span class="byline">By <a href="/author/mollie-taylor.html">Mollie Taylor</a></span>
			<span class="cat-links"><a href="/category/r.html" title="View all posts in R" rel="category tag">R</a></span>
	</div> <!-- /#entry-meta -->
	<div class="main">
		<h2 class="entry-title">
			<a href="/2013/09/using-colclasses-to-load-data-more.html" title="Permalink to Using colClasses to Load Data More Quickly in R" rel="bookmark">Using colClasses to Load Data More Quickly in R</a>
		</h2>
		<div class="entry-content">
			<p>Specifying a <code>colClasses</code> argument to <code>read.table</code> or <code>read.csv</code> can save time on importing data, while also saving steps to specify classes for each variable later.</p>
<p>For example, loading a 893 MB took 441 seconds to load when not using <code>colClasses</code>, but only 268 seconds to load when using <code>colClasses</code>. The <code>system.time</code> function in <strong>base</strong> can help you check your own times.</p>
<p>Without specifying <code>colClasses</code>:</p>
<div class="highlight"><pre>   user  system elapsed 
<span class="m">441.224</span>   <span class="m">8.200</span> <span class="m">454.155</span>
</pre></div>


<p>When specifying <code>colClasses</code>:</p>
<div class="highlight"><pre>   user  system elapsed 
<span class="m">268.036</span>   <span class="m">6.096</span> <span class="m">284.099</span>
</pre></div>


<p>Dates that are in the <a href="/2013/08/date-formats-in-r.html">form %Y-%m-%d or Y/%m/%d</a> will import correctly. <a href="http://stackoverflow.com/a/13022441">This tip allows you to import dates properly</a> for dates in other formats.</p>
<div class="highlight"><pre><span class="kp">system.time</span><span class="p">(</span>largeData <span class="o">&lt;-</span> read.csv<span class="p">(</span><span class="s">&quot;huge-file.csv&quot;</span><span class="p">,</span>
    header <span class="o">=</span> <span class="kc">TRUE</span><span class="p">,</span>
    colClasses <span class="o">=</span> <span class="kt">c</span><span class="p">(</span><span class="s">&quot;character&quot;</span><span class="p">,</span> <span class="s">&quot;character&quot;</span><span class="p">,</span> <span class="s">&quot;complex&quot;</span><span class="p">,</span> 
        <span class="s">&quot;factor&quot;</span><span class="p">,</span> <span class="s">&quot;factor&quot;</span><span class="p">,</span> <span class="s">&quot;character&quot;</span><span class="p">,</span> <span class="s">&quot;integer&quot;</span><span class="p">,</span> 
        <span class="s">&quot;integer&quot;</span><span class="p">,</span> <span class="s">&quot;numeric&quot;</span><span class="p">,</span> <span class="s">&quot;character&quot;</span><span class="p">,</span> <span class="s">&quot;character&quot;</span><span class="p">,</span>
        <span class="s">&quot;Date&quot;</span><span class="p">,</span> <span class="s">&quot;integer&quot;</span><span class="p">,</span> <span class="s">&quot;logical&quot;</span><span class="p">)))</span>
</pre></div>


<p>If there aren't any classes that you want to change from their defaults, you can read in the first few rows, <a href="http://www.biostat.jhsph.edu/~rpeng/docs/R-large-tables.html">determine the classes from that</a>, and then import the rest of the file:</p>
<div class="highlight"><pre>sampleData <span class="o">&lt;-</span> read.csv<span class="p">(</span><span class="s">&quot;huge-file.csv&quot;</span><span class="p">,</span> header <span class="o">=</span> <span class="kc">TRUE</span><span class="p">,</span> nrows <span class="o">=</span> <span class="m">5</span><span class="p">)</span>
classes <span class="o">&lt;-</span> <span class="kp">sapply</span><span class="p">(</span>sampleData<span class="p">,</span> <span class="kp">class</span><span class="p">)</span>
largeData <span class="o">&lt;-</span> read.csv<span class="p">(</span><span class="s">&quot;huge-file.csv&quot;</span><span class="p">,</span> header <span class="o">=</span> <span class="kc">TRUE</span><span class="p">,</span> colClasses <span class="o">=</span> classes<span class="p">)</span>
str<span class="p">(</span>largeData<span class="p">)</span>
</pre></div>


<p>If you aren't concerned about the time it takes to read the data file, but instead just want the classes to be correct on import, you have the option of only specifying certain classes:</p>
<div class="highlight"><pre>smallData <span class="o">&lt;-</span> read.csv<span class="p">(</span><span class="s">&quot;small-file.csv&quot;</span><span class="p">,</span> 
    header <span class="o">=</span> <span class="kc">TRUE</span><span class="p">,</span>
    colClasses<span class="o">=</span><span class="kt">c</span><span class="p">(</span><span class="s">&quot;variableName&quot;</span><span class="o">=</span><span class="s">&quot;character&quot;</span><span class="p">))</span>

<span class="o">&gt;</span> <span class="kp">class</span><span class="p">(</span>smallData<span class="o">$</span>variableName<span class="p">)</span>
<span class="p">[</span><span class="m">1</span><span class="p">]</span> <span class="s">&quot;character&quot;</span>
</pre></div>


<blockquote>
<p>This post is one part of my series on dealing with large datasets.</p>
</blockquote>
<h2>Citations and Further Reading</h2>
<ul>
<li><a href="http://stackoverflow.com/questions/2805357/specifying-colclasses-in-the-read-csv">http://stackoverflow.com/questions/2805357/specifying-colclasses-in-the-read-csv</a></li>
<li><a href="http://www.biostat.jhsph.edu/~rpeng/docs/R-large-tables.html">http://www.biostat.jhsph.edu/~rpeng/docs/R-large-tables.html</a></li>
<li><a href="/2013/08/date-formats-in-r.html">Date Formats in R</a></li>
<li><a href="http://stackoverflow.com/a/13022441">http://stackoverflow.com/a/13022441</a></li>
</ul>
<blockquote>
<p>In a <a href="http://mollietaylor.blogspot.com/2013/09/using-colclasses-to-load-data-more.html?showComment=1378560018132#c2964058082964060072">comment</a>, Michael pointed out that if you don't need all the columns in your dataset, providing their <code>colClass</code> as <code>NULL</code> will exclude them from being loaded.</p>
</blockquote>
		</div> <!--/#entry-content-->
    		<span class="tag-links"><strong>Tagged</strong>
 <a href="/tag/colclasses.html" rel="tag">colClasses</a>,  <a href="/tag/r.html" rel="tag">R</a>,  <a href="/tag/readcsv.html" rel="tag">read.csv</a>,  <a href="/tag/readtable.html" rel="tag">read.table</a>,  <a href="/tag/series-large-data.html" rel="tag">Series: Large Data</a>,  <a href="/tag/setup.html" rel="tag">setup</a>,  <a href="/tag/systemtime.html" rel="tag">system.time</a>    		</span>
	</div> <!--/#main-->
</div>  <!--/#post--><div class="post type-post status-publish format-standard hentry category-general" id="post">
	<div class="entry-meta">
		<div class="date"><a href="/2013/08/date-formats-in-r.html">Thu 22 August 2013</a></div>
		<span class="byline">By <a href="/author/mollie-taylor.html">Mollie Taylor</a></span>
			<span class="cat-links"><a href="/category/r.html" title="View all posts in R" rel="category tag">R</a></span>
	</div> <!-- /#entry-meta -->
	<div class="main">
		<h2 class="entry-title">
			<a href="/2013/08/date-formats-in-r.html" title="Permalink to Date Formats in R" rel="bookmark">Date Formats in R</a>
		</h2>
		<div class="entry-content">
			<h2>Importing Dates</h2>
<p>Dates can be imported from character, numeric, POSIXlt, and POSIXct formats using the <code>as.Date</code> function from the <strong>base</strong> package.</p>
<p>If your data were exported from Excel, they will possibly be in numeric format. Otherwise, they will most likely be stored in character format.</p>
<h3>Importing Dates from Character Format</h3>
<p>If your dates are stored as characters, you simply need to provide <code>as.Date</code> with your vector of dates and the format they are currently stored in. The possible date segment formats are listed in a table below. </p>
<p>For example,</p>
<p>"05/27/84" is in the format %m/%d/%y, while "May 27 1984" is in the format %B %d %Y.</p>
<p>To import those dates, you would simply provide your dates and their format (if not specified, it tries %Y-%m-%d and then %Y/%m/%d):</p>
<div class="highlight"><pre>dates <span class="o">&lt;-</span> <span class="kt">c</span><span class="p">(</span><span class="s">&quot;05/27/84&quot;</span><span class="p">,</span> <span class="s">&quot;07/07/05&quot;</span><span class="p">)</span>
betterDates <span class="o">&lt;-</span> <span class="kp">as.Date</span><span class="p">(</span>dates<span class="p">,</span>
    format <span class="o">=</span> <span class="s">&quot;%m/%d/%y&quot;</span><span class="p">)</span>
<span class="o">&gt;</span> betterDates
<span class="p">[</span><span class="m">1</span><span class="p">]</span> <span class="s">&quot;1984-05-27&quot;</span> <span class="s">&quot;2005-07-07&quot;</span>
</pre></div>


<p>This outputs the dates in the ISO 8601 international standard format %Y-%m-%d. If you would like to use dates in a different format, read "Changing Date Formats" below.</p>
<h3>Importing Dates from Numeric Format</h3>
<p>If you are importing data from Excel, you may have dates that are in a numeric format. We can still use as.Date to import these, we simply need to know the origin date that Excel starts counting from, and provide that to as.Date.</p>
<p>For Excel on Windows, the origin date is December 30, 1899 for dates after 1900. (Excel's designer thought 1900 was a leap year, but it was not.) For Excel on Mac, the origin date is January 1, 1904.</p>
<div class="highlight"><pre><span class="c1"># from Windows Excel:</span>
    dates <span class="o">&lt;-</span> <span class="kt">c</span><span class="p">(</span><span class="m">30829</span><span class="p">,</span> <span class="m">38540</span><span class="p">)</span>
    betterDates <span class="o">&lt;-</span> <span class="kp">as.Date</span><span class="p">(</span>dates<span class="p">,</span>
        origin <span class="o">=</span> <span class="s">&quot;1899-12-30&quot;</span><span class="p">)</span>

<span class="o">&gt;</span>   betterDates
<span class="p">[</span><span class="m">1</span><span class="p">]</span> <span class="s">&quot;1984-05-27&quot;</span> <span class="s">&quot;2005-07-07&quot;</span>

<span class="c1"># from Mac Excel:</span>
    dates <span class="o">&lt;-</span> <span class="kt">c</span><span class="p">(</span><span class="m">29367</span><span class="p">,</span> <span class="m">37078</span><span class="p">)</span>
    betterDates <span class="o">&lt;-</span> <span class="kp">as.Date</span><span class="p">(</span>dates<span class="p">,</span>
        origin <span class="o">=</span> <span class="s">&quot;1904-01-01&quot;</span><span class="p">)</span>

<span class="o">&gt;</span>   betterDates
<span class="p">[</span><span class="m">1</span><span class="p">]</span> <span class="s">&quot;1984-05-27&quot;</span> <span class="s">&quot;2005-07-07&quot;</span>
</pre></div>


<p>This outputs the dates in the ISO 8601 international standard format %Y-%m-%d. If you would like to use dates in a different format, read the next step:</p>
<h2>Changing Date Formats</h2>
<p>If you would like to use dates in a format other than the standard %Y-%m-%d, you can do that using the <code>format</code> function from the <strong>base</strong> package.</p>
<p>For example,</p>
<div class="highlight"><pre><span class="kp">format</span><span class="p">(</span>betterDates<span class="p">,</span>
    <span class="s">&quot;%a %b %d&quot;</span><span class="p">)</span>

<span class="p">[</span><span class="m">1</span><span class="p">]</span> <span class="s">&quot;Sun May 27&quot;</span> <span class="s">&quot;Thu Jul 07&quot;</span>
</pre></div>


<h2>Correct Centuries</h2>
<p>If you are importing data with only two digits for the years, you will find that it assumes that years 69 to 99 are 1969-1999, while years 00 to 68 are 2000--2068 (subject to change in future versions of R).</p>
<p>Often, this is not what you intend to have happen. <a href="http://stackoverflow.com/questions/9508747/r-adding-century-to-year">This page</a> gives a good explanation of several ways to fix this depending on your preference of centuries. One solution it provides is to assume all dates R is placing in the future are really from the previous century. That solution is as follows:</p>
<div class="highlight"><pre>dates <span class="o">&lt;-</span> <span class="kt">c</span><span class="p">(</span><span class="s">&quot;05/27/84&quot;</span><span class="p">,</span> <span class="s">&quot;07/07/05&quot;</span><span class="p">,</span> <span class="s">&quot;08/17/20&quot;</span><span class="p">)</span>
betterDates <span class="o">&lt;-</span> <span class="kp">as.Date</span><span class="p">(</span>dates<span class="p">,</span> <span class="s">&quot;%m/%d/%y&quot;</span><span class="p">)</span>

<span class="o">&gt;</span> betterDates
<span class="p">[</span><span class="m">1</span><span class="p">]</span> <span class="s">&quot;1984-05-27&quot;</span> <span class="s">&quot;2005-07-07&quot;</span> <span class="s">&quot;2020-08-17&quot;</span>

correctCentury <span class="o">&lt;-</span> <span class="kp">as.Date</span><span class="p">(</span><span class="kp">ifelse</span><span class="p">(</span>betterDates <span class="o">&gt;</span> <span class="kp">Sys.Date</span><span class="p">(),</span> 
    <span class="kp">format</span><span class="p">(</span>betterDates<span class="p">,</span> <span class="s">&quot;19%y-%m-%d&quot;</span><span class="p">),</span> 
    <span class="kp">format</span><span class="p">(</span>betterDates<span class="p">)))</span>

<span class="o">&gt;</span> correctCentury
<span class="p">[</span><span class="m">1</span><span class="p">]</span> <span class="s">&quot;1984-05-27&quot;</span> <span class="s">&quot;2005-07-07&quot;</span> <span class="s">&quot;1920-08-17&quot;</span>
</pre></div>


<h2>Purpose of Proper Formatting</h2>
<p>Having your dates in the proper format allows R to know that they are dates, and as such knows what calculations it should and should not perform on them. For one example, see my <a href="/2013/08/plot-weekly-or-monthly-totals-in-r.html">post on plotting weekly or monthly totals</a>. Here are a few more examples:</p>
<div class="highlight"><pre><span class="o">&gt;</span>   <span class="kp">mean</span><span class="p">(</span>betterDates<span class="p">)</span>
<span class="p">[</span><span class="m">1</span><span class="p">]</span> <span class="s">&quot;1994-12-16&quot;</span>

<span class="o">&gt;</span>   <span class="kp">max</span><span class="p">(</span>betterDates<span class="p">)</span>
<span class="p">[</span><span class="m">1</span><span class="p">]</span> <span class="s">&quot;2005-07-07&quot;</span>

<span class="o">&gt;</span>   <span class="kp">min</span><span class="p">(</span>betterDates<span class="p">)</span>
<span class="p">[</span><span class="m">1</span><span class="p">]</span> <span class="s">&quot;1984-05-27&quot;</span>
</pre></div>


<p>The code is available in a <a href="https://gist.github.com/mollietaylor/6258459">gist</a>.</p>
<h2>Date Formats</h2>
<table>
<thead>
<tr>
<th>Conversion specification</th>
<th>Description</th>
<th>Example</th>
</tr>
</thead>
<tbody>
<tr>
<td>%a</td>
<td>Abbreviated weekday</td>
<td>Sun, Thu</td>
</tr>
<tr>
<td>%A</td>
<td>Full weekday</td>
<td>Sunday, Thursday</td>
</tr>
<tr>
<td>%b or %h</td>
<td>Abbreviated month</td>
<td>May, Jul</td>
</tr>
<tr>
<td>%B</td>
<td>Full month</td>
<td>May, July</td>
</tr>
<tr>
<td>%d</td>
<td>Day of the month</td>
<td>27, 07</td>
</tr>
<tr>
<td></td>
<td>01-31</td>
<td></td>
</tr>
<tr>
<td>%j</td>
<td>Day of the year</td>
<td>148, 188</td>
</tr>
<tr>
<td></td>
<td>001-366</td>
<td></td>
</tr>
<tr>
<td>%m</td>
<td>Month</td>
<td>05, 07</td>
</tr>
<tr>
<td></td>
<td>01-12</td>
<td></td>
</tr>
<tr>
<td>%U</td>
<td>Week</td>
<td>22, 27</td>
</tr>
<tr>
<td></td>
<td>01-53</td>
<td></td>
</tr>
<tr>
<td></td>
<td>with Sunday as first day of the week</td>
<td></td>
</tr>
<tr>
<td>%w</td>
<td>Weekday</td>
<td>0, 4</td>
</tr>
<tr>
<td></td>
<td>0-6</td>
<td></td>
</tr>
<tr>
<td></td>
<td>Sunday is 0</td>
<td></td>
</tr>
<tr>
<td>%W</td>
<td>Week</td>
<td>21, 27</td>
</tr>
<tr>
<td></td>
<td>00-53</td>
<td></td>
</tr>
<tr>
<td></td>
<td>with Monday as first day of the week</td>
<td></td>
</tr>
<tr>
<td>%x</td>
<td>Date, locale-specific</td>
<td></td>
</tr>
<tr>
<td>%y</td>
<td>Year without century</td>
<td>84, 05</td>
</tr>
<tr>
<td></td>
<td>00-99</td>
<td></td>
</tr>
<tr>
<td>%Y</td>
<td>Year with century</td>
<td>1984, 2005</td>
</tr>
<tr>
<td></td>
<td>on input:</td>
<td></td>
</tr>
<tr>
<td></td>
<td>00 to 68 prefixed by 20</td>
<td></td>
</tr>
<tr>
<td></td>
<td>69 to 99 prefixed by 19</td>
<td></td>
</tr>
<tr>
<td>%C</td>
<td>Century</td>
<td>19, 20</td>
</tr>
<tr>
<td>%D</td>
<td>Date formatted %m/%d/%y</td>
<td>05/27/84, 07/07/05</td>
</tr>
<tr>
<td>%u</td>
<td>Weekday</td>
<td>7, 4</td>
</tr>
<tr>
<td></td>
<td>1-7</td>
<td></td>
</tr>
<tr>
<td></td>
<td>Monday is 1</td>
<td></td>
</tr>
<tr>
<td>%n</td>
<td>Newline on output or</td>
<td></td>
</tr>
<tr>
<td></td>
<td>Arbitrary whitespace on input</td>
<td></td>
</tr>
<tr>
<td>%t</td>
<td>Tab on output or</td>
<td></td>
</tr>
<tr>
<td></td>
<td>Arbitrary whitespace on input</td>
<td></td>
</tr>
</tbody>
</table>
<h2>References</h2>
<ul>
<li>help(as.Date)</li>
<li>help(strptime)</li>
<li><a href="http://stackoverflow.com/questions/9508747/r-adding-century-to-year">http://stackoverflow.com/questions/9508747/r-adding-century-to-year</a></li>
</ul>
		</div> <!--/#entry-content-->
    		<span class="tag-links"><strong>Tagged</strong>
 <a href="/tag/asdate.html" rel="tag">as.Date</a>,  <a href="/tag/format.html" rel="tag">format</a>,  <a href="/tag/r.html" rel="tag">R</a>,  <a href="/tag/setup.html" rel="tag">setup</a>,  <a href="/tag/sysdate.html" rel="tag">Sys.Date</a>    		</span>
	</div> <!--/#main-->
</div>  <!--/#post--><div class="post type-post status-publish format-standard hentry category-general" id="post">
	<div class="entry-meta">
		<div class="date"><a href="/2012/09/text-to-columns-in-stata.html">Thu 06 September 2012</a></div>
		<span class="byline">By <a href="/author/mollie-taylor.html">Mollie Taylor</a></span>
			<span class="cat-links"><a href="/category/.html" title="View all posts in " rel="category tag"></a></span>
	</div> <!-- /#entry-meta -->
	<div class="main">
		<h2 class="entry-title">
			<a href="/2012/09/text-to-columns-in-stata.html" title="Permalink to Text to Columns in Stata" rel="bookmark">Text to Columns in Stata</a>
		</h2>
		<div class="entry-content">
			<p>If you've ever used Excel's text to columns feature, you know how valuable it can be. If you haven't ever used text to columns, it allows you to take one column of data and separate it into multiple columns using delimiters that you provide. One time this is helpful is when converting data from other formats.</p>
<p>If you're learning Stata, you may wonder how you can gain this useful functionality. There are a few different ways, but for now we'll be discussing <code>split</code>.</p>
<p>For the following example, I have imported some patent data where the four most relevant primary patent classes for each observation are listed in a single column. These are delimited by a "/" as can be seen below.</p>
<p><img alt="Data before transformation" class="size-auto" src="/images/stata-before.png" /></p>
<p>I would like each of these classes to be included in its own column. To do this, I give Stata the following command:</p>
<p><code>split class, parse(/) generate(class)</code></p>
<p><img alt="Stata command and feedback" src="/images/stata-command-line.png" /></p>
<p>In this command, the first <code>class</code> is the name of the variable I want to transform, <code>/</code> is the delimiter, and <code>generate(class)</code> lets Stata to know that I would like the names of the new variables to each be class followed by an integer. In the example, the most <code>/</code>'s there were in <code>class</code> was two, so three <code>class[n]</code> variables are created.</p>
<p><img alt="Data after transformation" class="size-auto" src="/images/stata-after.png" /></p>
<p>I can then <code>drop class</code> if I want to remove the original class variable.</p>
<p>I could have also used the option <code>destring</code> if I wanted to treat the patent classes as numbers.</p>
<p><img alt="Stata documentation excerpt" class="size-auto" src="/images/stata-docs.png" /></p>
<p>More use cases are shown in the <a href="http://www.stata.com/help.cgi?split">split documentation</a>. One example they provide allows you to use multiple delimiters. In this instance showing how to separate the names of court cases even if some are delimited by "v." and some by "vs."</p>
<p>For more complex situations, you can also use <a href="http://www.ats.ucla.edu/stat/Stata/faq/regex.htm">regular expressions</a>.</p>
		</div> <!--/#entry-content-->
    		<span class="tag-links"><strong>Tagged</strong>
 <a href="/tag/cleaning.html" rel="tag">cleaning</a>,  <a href="/tag/setup.html" rel="tag">setup</a>,  <a href="/tag/split.html" rel="tag">split</a>,  <a href="/tag/stata.html" rel="tag">Stata</a>    		</span>
	</div> <!--/#main-->
</div>  <!--/#post--><div class="navigation">
</div>
		</div>
		
		<div id="footer">
			<p>Powered by <a href="http://getpelican.com">Pelican</a>, theme by <a href="http://bunnyman.info">tBunnyMan</a>.</p>
		</div><!-- /#footer -->
	</div><!-- /#container -->
	<div style="display:none"></div>
</body>
</html>