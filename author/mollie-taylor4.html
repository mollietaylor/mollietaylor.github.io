<!DOCTYPE html>
<html lang="en">
<head>
		<title>Maps & Apps &mdash; Articles by Mollie Taylor</title>
		<meta charset="utf-8" />
		<link rel="profile" href="http://gmpg.org/xfn/11" />
		<link rel="stylesheet" type="text/css" href="/theme/css/style.css" />
		<link rel='stylesheet' id='oswald-css'  href='http://fonts.googleapis.com/css?family=Oswald&#038;ver=3.3.2' type='text/css' media='all' />
		<style type="text/css">
			body.custom-background { background-color: #f5f5f5; }
		</style>
		<link rel="alternate" type="application/atom+xml"
			title="Maps & Apps — Flux Atom"
			href="/" /> 
		<!--[if lte IE 8]><script src="/theme/js/html5shiv.js"></script><![endif]-->
</head>

<body class="home blog custom-background " >
	<div id="container">
		<div id="header">
				<h1 id="site-title"><a href="">Maps & Apps</a></h1>
		</div><!-- /#banner -->
		
		<div id="menu">
			<div class="menu-navigation-container">
				<ul id="menu-navigation" class="menu">
						<li class="menu-item menu-item-type-post_type menu-item-object-page"><a href="/pages/about/index.html">About Mollie</a></li>
						<li class="active" class="menu-item menu-item-type-post_type menu-item-object-page"><a href="/category/.html"></a></li>
						<li class="menu-item menu-item-type-post_type menu-item-object-page"><a href="/category/latex.html">LaTeX</a></li>
						<li class="menu-item menu-item-type-post_type menu-item-object-page"><a href="/category/leaflet.html">Leaflet</a></li>
						<li class="menu-item menu-item-type-post_type menu-item-object-page"><a href="/category/r.html">R</a></li>

				</ul>
			</div> <!--/#menu-navigation-container-->
		</div><!-- /#menu -->
		
		<div class="page-title">
	<h2>Posted by <span>Mollie Taylor</span> &hellip;</h2>
		</div>
	
		<div id="contents">
<div class="post type-post status-publish format-standard hentry category-general" id="post">
	<div class="entry-meta">
		<div class="date"><a href="/2013/02/gps-basemaps-in-r-using-getmap.html">Thu 14 February 2013</a></div>
		<span class="byline">By <a href="/author/mollie-taylor.html">Mollie Taylor</a></span>
			<span class="cat-links"><a href="/category/r.html" title="View all posts in R" rel="category tag">R</a></span>
	</div> <!-- /#entry-meta -->
	<div class="main">
		<h2 class="entry-title">
			<a href="/2013/02/gps-basemaps-in-r-using-getmap.html" title="Permalink to GPS Basemaps in R Using get_map" rel="bookmark">GPS Basemaps in R Using get_map</a>
		</h2>
		<div class="entry-content">
			<p>There are <em>many</em> different maps you can use for a background map for your gps or other latitude/longitude data (i.e. any time you're using <code>geom_path</code>, <code>geom_segment</code>, or <code>geom_point</code>.)</p>
<h2>get_map</h2>
<p>Helpfully, there's just one function that will allow you to query Google Maps, OpenStreetMap, Stamen maps, or CloudMade maps: <code>get_map</code> in the <strong>ggmap</strong> package. You could also use either <code>get_googlemap</code>, <code>get_openstreetmap</code>, <code>get_stamenmap</code>, or <code>get_cloudmademap</code>, but instead you can just use <code>get_map</code> for the same functionality as all of those combined. This makes it easy to try out different basemaps for your data.</p>
<p>You need to supply <code>get_map</code> with your location data and the color, source, maptype, and zoom of the base map.</p>
<p>Let's go ahead and map the trails in Elwyn John Wildlife Sanctuary here in Atlanta. <a href="https://gist.github.com/mollietaylor/4742865">The csv data and R file are available in a gist</a>.</p>
<div class="highlight"><pre>gps <span class="o">&lt;-</span> read.csv<span class="p">(</span><span class="s">&quot;elwyn.csv&quot;</span><span class="p">,</span>
    header <span class="o">=</span> <span class="kc">TRUE</span><span class="p">)</span>

<span class="kn">library</span><span class="p">(</span>ggmap<span class="p">)</span>
mapImageData <span class="o">&lt;-</span> get_map<span class="p">(</span>location <span class="o">=</span> <span class="kt">c</span><span class="p">(</span>lon <span class="o">=</span> <span class="kp">mean</span><span class="p">(</span>gps<span class="o">$</span>Longitude<span class="p">),</span>
    lat <span class="o">=</span> <span class="m">33.824</span><span class="p">),</span>
    color <span class="o">=</span> <span class="s">&quot;color&quot;</span><span class="p">,</span> <span class="c1"># or bw</span>
    <span class="kn">source</span> <span class="o">=</span> <span class="s">&quot;google&quot;</span><span class="p">,</span>
    maptype <span class="o">=</span> <span class="s">&quot;satellite&quot;</span><span class="p">,</span>
    <span class="c1"># api_key = &quot;your_api_key&quot;, # only needed for source = &quot;cloudmade&quot;</span>
    zoom <span class="o">=</span> <span class="m">17</span><span class="p">)</span>

pathcolor <span class="o">&lt;-</span> <span class="s">&quot;#F8971F&quot;</span>

ggmap<span class="p">(</span>mapImageData<span class="p">,</span>
    extent <span class="o">=</span> <span class="s">&quot;device&quot;</span><span class="p">,</span> <span class="c1"># &quot;panel&quot; keeps in axes, etc.</span>
    ylab <span class="o">=</span> <span class="s">&quot;Latitude&quot;</span><span class="p">,</span>
    xlab <span class="o">=</span> <span class="s">&quot;Longitude&quot;</span><span class="p">,</span>
    legend <span class="o">=</span> <span class="s">&quot;right&quot;</span><span class="p">)</span> <span class="o">+</span>
    geom_path<span class="p">(</span>aes<span class="p">(</span>x <span class="o">=</span> Longitude<span class="p">,</span> <span class="c1"># path outline</span>
    y <span class="o">=</span> Latitude<span class="p">),</span>
    data <span class="o">=</span> gps<span class="p">,</span>
    colour <span class="o">=</span> <span class="s">&quot;black&quot;</span><span class="p">,</span>
    size <span class="o">=</span> <span class="m">2</span><span class="p">)</span> <span class="o">+</span>
    geom_path<span class="p">(</span>aes<span class="p">(</span>x <span class="o">=</span> Longitude<span class="p">,</span> <span class="c1"># path</span>
    y <span class="o">=</span> Latitude<span class="p">),</span>
    colour <span class="o">=</span> pathcolor<span class="p">,</span>
    data <span class="o">=</span> gps<span class="p">,</span>
    size <span class="o">=</span> <span class="m">1.4</span><span class="p">)</span> <span class="c1"># +</span>
<span class="c1"># labs(x = &quot;Longitude&quot;,</span>
<span class="c1">#   y = &quot;Latitude&quot;) # if you do extent = &quot;panel&quot;</span>
</pre></div>


<p>We'll be changing the four lines marked above in orange to change what basemap is used.</p>
<h2>source = "google"</h2>
<p><code>get_map</code> option source = "google" (or using get_googlemap) downloads a map from the Google Maps API. The basemaps are © Google. Google Maps have four different maptype options: terrain, satellite, roadmap, and hybrid.</p>
<h3>source = "google", maptype = "terrain"</h3>
<p><img alt="source = &quot;google&quot;, maptype = &quot;terrain&quot;, zoom = 14" src="/images/r-google-terrain.png" /></p>
<p>Max zoom: 14</p>
<h3>source = "google", maptype = "satellite"</h3>
<p><img alt="source = &quot;google&quot;, maptype = &quot;satellite&quot;, zoom = 17" src="/images/r-google-satellite.png" /></p>
<p>Max zoom: 20</p>
<h3>source = "google", maptype = "roadmap"</h3>
<p><img alt="source = &quot;google&quot;, maptype = &quot;roadmap&quot;, zoom = 17" src="/images/r-google-roadmap.png" /></p>
<h3>source = "google", maptype = "hybrid"</h3>
<p>Hybrid combines roadmap and satellite.
<img alt="source = &quot;google&quot;, maptype = &quot;hybrid&quot;, zoom = 17" src="/images/r-google-hybrid.png" /></p>
<p>Max zoom: 14</p>
<h2>source = "osm"</h2>
<p><code>get_map</code> option source = "osm" (or using <code>get_openstreetmap</code>) downloads a map from <a href="http://www.openstreetmap.org/">OpenStreetMap</a>. These maps are Creative Commons licensed, specifically <a href="http://creativecommons.org/licenses/by-sa/2.0/">Attribution-ShareAlike 2.0 (CC-BY-SA)</a>. This means you are free to use the maps for commercial purposes, as long as you release your final product under the same Creative Commons license. OpenStreetMap has no maptype options.</p>
<h3>source = "osm" (no maptype needed)</h3>
<p><img alt="source = &quot;osm&quot;, zoom = 17" src="/images/r-osm.png" /></p>
<p>Max zoom: 20</p>
<h2>source = "stamen"</h2>
<p><code>get_map</code> option source = "stamen" (or using <code>get_stamenmap</code>) downloads a map from Stamen Maps. The map tiles are by <a href="http://stamen.com/">Stamen Design</a>, licensed under <a href="http://creativecommons.org/licenses/by/3.0">CC BY 3.0</a>. The data for Stamen Maps is by <a href="http://openstreetmap.org/">OpenStreetMap</a>, licensed under <a href="http://creativecommons.org/licenses/by-sa/3.0">CC BY SA</a>. Stamen has three different maptype options: terrain, watercolor, and toner.</p>
<h3>source = "stamen", maptype = "terrain"</h3>
<p><img alt="source = &quot;stamen&quot;, maptype = &quot;terrain&quot;, zoom = 17" src="/images/r-stamen-terrain.png" /></p>
<p>Max zoom: 18</p>
<h3>source = "stamen", maptype = "watercolor"</h3>
<p><img alt="source = &quot;stamen&quot;, maptype = &quot;watercolor&quot;, zoom = 17" src="/images/r-stamen-watercolor.png" /></p>
<p>Max zoom: 18</p>
<h3>source = "stamen", maptype = "toner"</h3>
<p><img alt="source = &quot;stamen&quot;, maptype = &quot;toner&quot;, zoom = 17" src="/images/r-stamen-toner.png" /></p>
<p>Max zoom: 18</p>
<h2>source = "cloudmade"</h2>
<blockquote>
<p>N.B. As of March 2014, CloudMade no longer provides this API service.</p>
</blockquote>
<p>CloudMade styles build on top of OpenStreetMap data. Thousands of CloudMade styles are available. You can <a href="http://maps.cloudmade.com/editor#">browse them on the CloudMade site</a>. You can also make your own styles.</p>
<p>To use CloudMade map styles in R, you will first need to get an API key to insert into your R code so it can access the maps. You can <a href="http://cloudmade.com/user/show">get an API key from the CloudMade site</a>.</p>
<p>Here are just a couple examples of CloudMade basemaps:</p>
<p><img alt="source = &quot;cloudmade&quot;, maptype = &quot;1&quot;, api_key=&quot;your_api_key_here, zoom = 17" src="/images/r-cloudmade-1.png" /></p>
<p><img alt="source = &quot;cloudmade&quot;, maptype = &quot;67367&quot;, api_key=&quot;your_api_key_here, zoom = 17" src="/images/r-cloudmade-67367.png" /></p>
<p>Max zoom: 18</p>
<p>The code and data are available in a <a href="https://gist.github.com/mollietaylor/4742865">gist</a>.</p>
		</div> <!--/#entry-content-->
    		<span class="tag-links"><strong>Tagged</strong>
 <a href="/tag/base-map.html" rel="tag">base map</a>,  <a href="/tag/basemap.html" rel="tag">basemap</a>,  <a href="/tag/geom_path.html" rel="tag">geom_path</a>,  <a href="/tag/geom_point.html" rel="tag">geom_point</a>,  <a href="/tag/geom_segment.html" rel="tag">geom_segment</a>,  <a href="/tag/get_cloudmademap.html" rel="tag">get_cloudmademap</a>,  <a href="/tag/get_googlemap.html" rel="tag">get_googlemap</a>,  <a href="/tag/get_map.html" rel="tag">get_map</a>,  <a href="/tag/get_openstreetmap.html" rel="tag">get_openstreetmap</a>,  <a href="/tag/get_stamenmap.html" rel="tag">get_stamenmap</a>,  <a href="/tag/ggmap.html" rel="tag">ggmap</a>,  <a href="/tag/gps.html" rel="tag">gps</a>,  <a href="/tag/r.html" rel="tag">R</a>,  <a href="/tag/visualization.html" rel="tag">visualization</a>    		</span>
	</div> <!--/#main-->
</div>  <!--/#post--><div class="post type-post status-publish format-standard hentry category-general" id="post">
	<div class="entry-meta">
		<div class="date"><a href="/2013/02/get-citrix-xendesktop-to-work-on-linux.html">Thu 07 February 2013</a></div>
		<span class="byline">By <a href="/author/mollie-taylor.html">Mollie Taylor</a></span>
			<span class="cat-links"><a href="/category/.html" title="View all posts in " rel="category tag"></a></span>
	</div> <!-- /#entry-meta -->
	<div class="main">
		<h2 class="entry-title">
			<a href="/2013/02/get-citrix-xendesktop-to-work-on-linux.html" title="Permalink to Get Citrix XenDesktop to Work on Linux" rel="bookmark">Get Citrix XenDesktop to Work on Linux</a>
		</h2>
		<div class="entry-content">
			<p>I had some difficulty figuring out how to get Citrix XenDesktop to work properly on Linux.</p>
<p>I was having the same problem I had had on Windows — when I would try to access XenDesktop, the browser would try to download launch.ica instead of running it.</p>
<h2>Citrix Receiver</h2>
<p>However, on other operating systems, I had always downloaded the Citrix Online Plug-in to fix the problem. For some reason, the Citrix Online Plug-in is not available for Linux. However, the <a href="http://receiver.citrix.com/?ntref=receiverdownload">Citrix Receiver</a> is available for Linux, and seems to do the same thing.</p>
<p>After installing Citrix Receiver, your browser will ask for your permission to run it.</p>
<p><img alt="Permission" class="size-auto" src="/images/citrix-permission.png" /></p>
<h2>Open Motif</h2>
<p>You may need to install Open Motif before you can install Citrix Receiver.</p>
<p>If so, download Open Motif, extract it, and follow the directions in INSTALL.configure, namely:</p>
<div class="highlight"><pre><span class="go">cd</span>
<span class="go">./configure</span>
<span class="go">make check</span>
<span class="go">make install</span>
<span class="go">make clean</span>
</pre></div>


<h2>Security Certificate</h2>
<p><img alt="Error" class="size-auto" src="/images/citrix-error.png" /></p>
<p>If you try to log on to your virtual desktop and get an error about "AddTrust External CA Root", you can just do</p>
<div class="highlight"><pre><span class="go">sudo cp /usr/share/ca-certificates/mozilla/*.* /opt/Citrix/ICAClient/keystore/cacerts/</span>
</pre></div>


<h2>References</h2>
<ul>
<li><a href="http://www.jorink.nl/2010/11/you-have-not-chosen-to-trust-addtrust-external-ca-root-the-issuer-of-the-servers-security-certificate/">http://www.jorink.nl/2010/11/you-have-not-chosen-to-trust-addtrust-external-ca-root-the-issuer-of-the-servers-security-certificate/</a></li>
</ul>
		</div> <!--/#entry-content-->
    		<span class="tag-links"><strong>Tagged</strong>
 <a href="/tag/citrix.html" rel="tag">Citrix</a>,  <a href="/tag/linux.html" rel="tag">Linux</a>,  <a href="/tag/ubuntu.html" rel="tag">ubuntu</a>,  <a href="/tag/xendesktop.html" rel="tag">XenDesktop</a>    		</span>
	</div> <!--/#main-->
</div>  <!--/#post--><div class="post type-post status-publish format-standard hentry category-general" id="post">
	<div class="entry-meta">
		<div class="date"><a href="/2013/01/using-line-segments-to-compare-values.html">Thu 31 January 2013</a></div>
		<span class="byline">By <a href="/author/mollie-taylor.html">Mollie Taylor</a></span>
			<span class="cat-links"><a href="/category/r.html" title="View all posts in R" rel="category tag">R</a></span>
	</div> <!-- /#entry-meta -->
	<div class="main">
		<h2 class="entry-title">
			<a href="/2013/01/using-line-segments-to-compare-values.html" title="Permalink to Using Line Segments to Compare Values in R" rel="bookmark">Using Line Segments to Compare Values in R</a>
		</h2>
		<div class="entry-content">
			<p>Sometimes you want to create a graph that will allow the viewer to see in one glance:</p>
<ul>
<li>The original value of a variable</li>
<li>The new value of the variable</li>
<li>The change between old and new</li>
</ul>
<p>One method I like to use to do this is using <code>geom_segment</code> and <code>geom_point</code> in the <strong>ggplot2</strong> package.</p>
<p>First, let's load <strong>ggplot2</strong> and our data:</p>
<div class="highlight"><pre><span class="kn">library</span><span class="p">(</span>ggplot2<span class="p">)</span>

data <span class="o">&lt;-</span> <span class="kp">as.data.frame</span><span class="p">(</span>USPersonalExpenditure<span class="p">)</span> <span class="c1"># data from package datasets</span>
data<span class="o">$</span>Category <span class="o">&lt;-</span> <span class="kp">as.character</span><span class="p">(</span><span class="kp">rownames</span><span class="p">(</span>USPersonalExpenditure<span class="p">))</span> <span class="c1"># this makes things simpler later</span>
</pre></div>


<p>Next, we'll set up our plot and axes:</p>
<div class="highlight"><pre>ggplot<span class="p">(</span>data<span class="p">,</span>
    aes<span class="p">(</span>y <span class="o">=</span> Category<span class="p">))</span> <span class="o">+</span>
labs<span class="p">(</span>x <span class="o">=</span> <span class="s">&quot;Expenditure&quot;</span><span class="p">,</span>
    y <span class="o">=</span> <span class="s">&quot;Category&quot;</span><span class="p">)</span> <span class="o">+</span>
</pre></div>


<p>For <code>geom_segment</code>, we need to provide four variables. (Sometimes two of the four will be the same, like in this case.) <code>x</code> and <code>y</code> provide the start points, and <code>xend</code> and <code>yend</code> provide the endpoints.</p>
<p>In this case, we want to show the change between 1940 and 1960 for each category. Therefore our variables are the following:</p>
<ul>
<li>x: "1940"</li>
<li>y: Category</li>
<li>xend: "1960"</li>
<li>yend: Category</li>
</ul>
<!--end the list-->

<div class="highlight"><pre>geom_segment<span class="p">(</span>aes<span class="p">(</span>x <span class="o">=</span> data<span class="o">$</span><span class="s">&quot;1940&quot;</span><span class="p">,</span>
  y <span class="o">=</span> Category<span class="p">,</span>
  xend <span class="o">=</span> data<span class="o">$</span><span class="s">&quot;1960&quot;</span><span class="p">,</span>
  yend <span class="o">=</span> Category<span class="p">),</span>
 size <span class="o">=</span> <span class="m">1</span><span class="p">)</span> <span class="o">+</span>
</pre></div>


<p>Next, we want to plot points for the 1940 and 1960 values. We could do the same for the 1945, 1950, and 1955 values, if we wanted to.</p>
<div class="highlight"><pre>geom_point<span class="p">(</span>aes<span class="p">(</span>x <span class="o">=</span> data<span class="o">$</span><span class="s">&quot;1940&quot;</span><span class="p">,</span>
    color <span class="o">=</span> <span class="s">&quot;1940&quot;</span><span class="p">),</span>
    size <span class="o">=</span> <span class="m">4</span><span class="p">,</span> shape <span class="o">=</span> <span class="m">15</span><span class="p">)</span> <span class="o">+</span>
geom_point<span class="p">(</span>aes<span class="p">(</span>x <span class="o">=</span> data<span class="o">$</span><span class="s">&quot;1960&quot;</span><span class="p">,</span>
    color <span class="o">=</span> <span class="s">&quot;1960&quot;</span><span class="p">),</span>
    size <span class="o">=</span> <span class="m">4</span><span class="p">,</span> shape <span class="o">=</span> <span class="m">15</span><span class="p">)</span> <span class="o">+</span>
</pre></div>


<p>Finally, we'll finish up by touching up the legend for the plot:</p>
<div class="highlight"><pre>scale_color_discrete<span class="p">(</span>name <span class="o">=</span> <span class="s">&quot;Year&quot;</span><span class="p">)</span> <span class="o">+</span>
theme<span class="p">(</span>legend.position <span class="o">=</span> <span class="s">&quot;bottom&quot;</span><span class="p">)</span>
</pre></div>


<p><img alt="geom_segment, then geom_point" src="/images/r-line-segments.png" /></p>
<p>The order of <code>geom_segment</code> and the <code>geom_points</code> matters. The first <code>geom</code> line in the code will get plotted first. Therefore, if you want the points displayed over the segments, put the segments first in the code. Likewise, if you want the segments displayed over the points, put the points first in the code.</p>
<p>For example, we could change the middle section of the code to:</p>
<div class="highlight"><pre>geom_point<span class="p">(</span>aes<span class="p">(</span>x <span class="o">=</span> data<span class="o">$</span><span class="s">&quot;1940&quot;</span><span class="p">,</span>
  color <span class="o">=</span> <span class="s">&quot;1940&quot;</span><span class="p">),</span>
  size <span class="o">=</span> <span class="m">4</span><span class="p">,</span> shape <span class="o">=</span> <span class="m">15</span><span class="p">)</span> <span class="o">+</span>
geom_point<span class="p">(</span>aes<span class="p">(</span>x <span class="o">=</span> data<span class="o">$</span><span class="s">&quot;1960&quot;</span><span class="p">,</span>
  color <span class="o">=</span> <span class="s">&quot;1960&quot;</span><span class="p">),</span>
  size <span class="o">=</span> <span class="m">4</span><span class="p">,</span> shape <span class="o">=</span> <span class="m">15</span><span class="p">)</span> <span class="o">+</span>

geom_segment<span class="p">(</span>aes<span class="p">(</span>x <span class="o">=</span> data<span class="o">$</span><span class="s">&quot;1940&quot;</span><span class="p">,</span>
    y <span class="o">=</span> Category<span class="p">,</span>
    xend <span class="o">=</span> data<span class="o">$</span><span class="s">&quot;1960&quot;</span><span class="p">,</span>
    yend <span class="o">=</span> Category<span class="p">),</span>
  size <span class="o">=</span> <span class="m">1</span><span class="p">)</span> <span class="o">+</span>
</pre></div>


<p>And the output would look like:</p>
<p><img alt="geom_point, then geom_segment" src="/images/r-line-segments.png" /></p>
<p>Similarly, if you have points that will be overlapping, make sure you think about which of the point lines you want R to plot first.</p>
<p>The code is available in a <a href="https://gist.github.com/4543148">gist</a>.</p>
		</div> <!--/#entry-content-->
    		<span class="tag-links"><strong>Tagged</strong>
 <a href="/tag/datasets.html" rel="tag">datasets</a>,  <a href="/tag/geom_point.html" rel="tag">geom_point</a>,  <a href="/tag/geom_segment.html" rel="tag">geom_segment</a>,  <a href="/tag/ggplot2.html" rel="tag">ggplot2</a>,  <a href="/tag/legend.html" rel="tag">legend</a>,  <a href="/tag/r.html" rel="tag">R</a>,  <a href="/tag/visualization.html" rel="tag">visualization</a>    		</span>
	</div> <!--/#main-->
</div>  <!--/#post--><div class="post type-post status-publish format-standard hentry category-general" id="post">
	<div class="entry-meta">
		<div class="date"><a href="/2013/01/storing-function-in-separate-file-in-r.html">Thu 24 January 2013</a></div>
		<span class="byline">By <a href="/author/mollie-taylor.html">Mollie Taylor</a></span>
			<span class="cat-links"><a href="/category/r.html" title="View all posts in R" rel="category tag">R</a></span>
	</div> <!-- /#entry-meta -->
	<div class="main">
		<h2 class="entry-title">
			<a href="/2013/01/storing-function-in-separate-file-in-r.html" title="Permalink to Storing a Function in a Separate File in R" rel="bookmark">Storing a Function in a Separate File in R</a>
		</h2>
		<div class="entry-content">
			<p>If you're going to be using a function across several different R files, you might want to store the function in its own file.</p>
<h3>If you want to name the function in its own file</h3>
<p>This is probably the best option in general, if only because you may want to put more than one function in a single file.</p>
<p>Next, let's make our function in the file <code>fun.R</code>:
    :::r
    mult &lt;- function(x, y) {
        x*y
    }</p>
<p>If you get the warning message "In readLines(file) : incomplete final line found on 'fun.R'", just insert a line break at the end of the fun.R file.</p>
<h3>If you want to name the function in the file running it</h3>
<p>First let's make the same function (but this time unnamed) in the file times.R:</p>
<div class="highlight"><pre><span class="kr">function</span><span class="p">(</span>x<span class="p">,</span> y<span class="p">)</span> <span class="p">{</span>
    x<span class="o">*</span>y
<span class="p">}</span>
</pre></div>


<h3>Calling the functions</h3>
<p>And finally we'll make a file file.R to call our functions:</p>
<div class="highlight"><pre>times <span class="o">&lt;-</span> <span class="kp">dget</span><span class="p">(</span><span class="s">&quot;times.R&quot;</span><span class="p">)</span>
times<span class="p">(</span><span class="m">-4</span><span class="o">:</span><span class="m">4</span><span class="p">,</span> <span class="m">2</span><span class="p">)</span>

<span class="kn">source</span><span class="p">(</span><span class="s">&quot;fun.R&quot;</span><span class="p">)</span>
mult<span class="p">(</span><span class="m">-4</span><span class="o">:</span><span class="m">4</span><span class="p">,</span> <span class="m">2</span><span class="p">)</span>
</pre></div>


<p>Note: if you are used to using source to run your R code, note that in this case we are using the <code>source</code> command <em>within</em> a file.</p>
<p>All files are available as a <a href="https://gist.github.com/4472146">gist</a>.</p>
		</div> <!--/#entry-content-->
    		<span class="tag-links"><strong>Tagged</strong>
 <a href="/tag/dget.html" rel="tag">dget</a>,  <a href="/tag/function.html" rel="tag">function</a>,  <a href="/tag/r.html" rel="tag">R</a>,  <a href="/tag/source.html" rel="tag">source</a>    		</span>
	</div> <!--/#main-->
</div>  <!--/#post--><div class="post type-post status-publish format-standard hentry category-general" id="post">
	<div class="entry-meta">
		<div class="date"><a href="/2013/01/calculating-gini-coefficients-for.html">Thu 17 January 2013</a></div>
		<span class="byline">By <a href="/author/mollie-taylor.html">Mollie Taylor</a></span>
			<span class="cat-links"><a href="/category/r.html" title="View all posts in R" rel="category tag">R</a></span>
	</div> <!-- /#entry-meta -->
	<div class="main">
		<h2 class="entry-title">
			<a href="/2013/01/calculating-gini-coefficients-for.html" title="Permalink to Calculating Gini Coefficients for a Number of Locales at Once in R" rel="bookmark">Calculating Gini Coefficients for a Number of Locales at Once in R</a>
		</h2>
		<div class="entry-content">
			<p>The <a href="http://en.wikipedia.org/wiki/Gini_coefficient">Gini coefficient</a> is a measure of the inequality of a distribution, most commonly used to compare inequality in income or wealth among countries.</p>
<p>Let's first generate some random data to analyze. You can <a href="https://gist.github.com/4432069">download my random data</a> or use the code below to generate your own. Of course, if you generate your own, your graphs and results will be different from those shown below.</p>
<div class="highlight"><pre>city <span class="o">&lt;-</span> <span class="kt">c</span><span class="p">(</span><span class="s">&quot;A&quot;</span><span class="p">,</span> <span class="s">&quot;B&quot;</span><span class="p">,</span> <span class="s">&quot;C&quot;</span><span class="p">,</span> <span class="s">&quot;D&quot;</span><span class="p">,</span> <span class="s">&quot;E&quot;</span><span class="p">,</span> <span class="s">&quot;F&quot;</span><span class="p">,</span> <span class="s">&quot;G&quot;</span><span class="p">,</span> <span class="s">&quot;H&quot;</span><span class="p">,</span> <span class="s">&quot;I&quot;</span><span class="p">,</span> <span class="s">&quot;J&quot;</span><span class="p">)</span>
income <span class="o">&lt;-</span> <span class="kp">sample</span><span class="p">(</span><span class="m">1</span><span class="o">:</span><span class="m">100000</span><span class="p">,</span>
    <span class="m">100</span><span class="p">,</span>
    replace <span class="o">=</span> <span class="kc">TRUE</span><span class="p">)</span>
cities <span class="o">&lt;-</span> <span class="kt">data.frame</span><span class="p">(</span>city<span class="p">,</span> income<span class="p">)</span>
</pre></div>


<p>Next, let's graph our data:</p>
<div class="highlight"><pre><span class="kn">library</span><span class="p">(</span>ggplot2<span class="p">)</span>
ggplot<span class="p">(</span>cities<span class="p">,</span>
    aes<span class="p">(</span>income<span class="p">))</span> <span class="o">+</span>
    stat_density<span class="p">(</span>geom <span class="o">=</span> <span class="s">&quot;path&quot;</span><span class="p">,</span>
        position <span class="o">=</span> <span class="s">&quot;identity&quot;</span><span class="p">)</span> <span class="o">+</span>
    facet_wrap<span class="p">(</span><span class="o">~</span> city<span class="p">,</span> ncol <span class="o">=</span> <span class="m">2</span><span class="p">)</span>
</pre></div>


<p><img alt="Histogram of each city's incomes // Your results will differ if using random data" src="/images/r-gini-hist.png" /></p>
<p>The Gini coefficient is easy enough to calculate in R for a single locale using the <code>gini</code> function from the <strong>reldist</strong> package.</p>
<div class="highlight"><pre><span class="kn">library</span><span class="p">(</span>reldist<span class="p">)</span>
gini<span class="p">(</span>cities<span class="p">[</span><span class="kp">which</span><span class="p">(</span>cities<span class="o">$</span>city <span class="o">==</span> <span class="s">&quot;A&quot;</span><span class="p">),</span> <span class="p">]</span><span class="o">$</span>income<span class="p">)</span>
</pre></div>


<p>But we don't want to replicate this code over and over to calculate the Gini coefficient for a large number of locales. We also want the coefficients to be in a data frame for easy use in R or for export for use in another program.</p>
<p>There are <a href="http://www.slideshare.net/jeffreybreen/grouping-summarizing-data-in-r">many ways to automate a function</a> to run over many subsets of a data frame. The most straightforward in our particular case is <code>aggregate</code>:</p>
<div class="highlight"><pre>ginicities <span class="o">&lt;-</span> aggregate<span class="p">(</span>income <span class="o">~</span> city<span class="p">,</span>
    data <span class="o">=</span> cities<span class="p">,</span>
    FUN <span class="o">=</span> <span class="s">&quot;gini&quot;</span><span class="p">)</span>
<span class="kp">names</span><span class="p">(</span>ginisec<span class="p">)</span> <span class="o">&lt;-</span> <span class="kt">c</span><span class="p">(</span><span class="s">&quot;city&quot;</span><span class="p">,</span> <span class="s">&quot;gini&quot;</span><span class="p">)</span>

<span class="o">&gt;</span> ginisec
   city      gini
<span class="m">1</span>     A <span class="m">0.2856827</span>
<span class="m">2</span>     B <span class="m">0.3639070</span>
<span class="m">3</span>     C <span class="m">0.3288934</span>
<span class="m">4</span>     D <span class="m">0.1863783</span>
<span class="m">5</span>     E <span class="m">0.3565739</span>
<span class="m">6</span>     <span class="bp">F</span> <span class="m">0.2587475</span>
<span class="m">7</span>     G <span class="m">0.3022642</span>
<span class="m">8</span>     H <span class="m">0.3795288</span>
<span class="m">9</span>     I <span class="m">0.3311034</span>
<span class="m">10</span>    J <span class="m">0.2496933</span>
</pre></div>


<p>And finally, let's go ahead and export our data using <code>write.csv</code>:</p>
<div class="highlight"><pre>write.csv<span class="p">(</span>ginicities<span class="p">,</span> <span class="s">&quot;gini.csv&quot;</span><span class="p">,</span>
    row.names <span class="o">=</span> <span class="kc">FALSE</span><span class="p">)</span>
</pre></div>


<p>While you're at it, you might want to try using other functions on your dataset, such as <code>mean</code>, <code>median</code>, and <code>length</code>.</p>
<p>The full code is available in a <a href="https://gist.github.com/4432069">gist</a>.</p>
<h2>Citations and Further Reading</h2>
<ul>
<li><a href="http://rss.acs.unt.edu/Rdoc/library/reldist/html/gini.html">http://rss.acs.unt.edu/Rdoc/library/reldist/html/gini.html</a></li>
<li><a href="http://www.slideshare.net/jeffreybreen/grouping-summarizing-data-in-r">http://www.slideshare.net/jeffreybreen/grouping-summarizing-data-in-r</a></li>
</ul>
		</div> <!--/#entry-content-->
    		<span class="tag-links"><strong>Tagged</strong>
 <a href="/tag/aggregate.html" rel="tag">aggregate</a>,  <a href="/tag/analysis.html" rel="tag">analysis</a>,  <a href="/tag/ggplot2.html" rel="tag">ggplot2</a>,  <a href="/tag/gini.html" rel="tag">gini</a>,  <a href="/tag/r.html" rel="tag">R</a>,  <a href="/tag/reldist.html" rel="tag">reldist</a>,  <a href="/tag/sample.html" rel="tag">sample</a>,  <a href="/tag/stat_density.html" rel="tag">stat_density</a>,  <a href="/tag/writecsv.html" rel="tag">write.csv</a>    		</span>
	</div> <!--/#main-->
</div>  <!--/#post--><div class="post type-post status-publish format-standard hentry category-general" id="post">
	<div class="entry-meta">
		<div class="date"><a href="/2013/01/stacked-bar-charts-in-r.html">Thu 10 January 2013</a></div>
		<span class="byline">By <a href="/author/mollie-taylor.html">Mollie Taylor</a></span>
			<span class="cat-links"><a href="/category/r.html" title="View all posts in R" rel="category tag">R</a></span>
	</div> <!-- /#entry-meta -->
	<div class="main">
		<h2 class="entry-title">
			<a href="/2013/01/stacked-bar-charts-in-r.html" title="Permalink to Stacked Bar Charts in R" rel="bookmark">Stacked Bar Charts in R</a>
		</h2>
		<div class="entry-content">
			<h2>Reshape Wide to Long</h2>
<p>Let's use the <code>Loblolly</code> dataset from the <strong>datasets</strong> package. These data track the growth of some loblolly pine trees.</p>
<div class="highlight"><pre><span class="o">&gt;</span> Loblolly<span class="p">[</span><span class="m">1</span><span class="o">:</span><span class="m">10</span><span class="p">,]</span>
   height age Seed
<span class="m">1</span>    <span class="m">4.51</span>   <span class="m">3</span>  <span class="m">301</span>
<span class="m">15</span>  <span class="m">10.89</span>   <span class="m">5</span>  <span class="m">301</span>
<span class="m">29</span>  <span class="m">28.72</span>  <span class="m">10</span>  <span class="m">301</span>
<span class="m">43</span>  <span class="m">41.74</span>  <span class="m">15</span>  <span class="m">301</span>
<span class="m">57</span>  <span class="m">52.70</span>  <span class="m">20</span>  <span class="m">301</span>
<span class="m">71</span>  <span class="m">60.92</span>  <span class="m">25</span>  <span class="m">301</span>
<span class="m">2</span>    <span class="m">4.55</span>   <span class="m">3</span>  <span class="m">303</span>
<span class="m">16</span>  <span class="m">10.92</span>   <span class="m">5</span>  <span class="m">303</span>
<span class="m">30</span>  <span class="m">29.07</span>  <span class="m">10</span>  <span class="m">303</span>
<span class="m">44</span>  <span class="m">42.83</span>  <span class="m">15</span>  <span class="m">303</span>
</pre></div>


<p>First, we need to convert the data to wide form, so each age (i.e. 3, 5, 10, 15, 20, 25) will have its own variable.</p>
<div class="highlight"><pre>wide <span class="o">&lt;-</span> reshape<span class="p">(</span>Loblolly<span class="p">,</span>
    v.names <span class="o">=</span> <span class="s">&quot;height&quot;</span><span class="p">,</span>
    timevar <span class="o">=</span> <span class="s">&quot;age&quot;</span><span class="p">,</span>
    idvar <span class="o">=</span> <span class="s">&quot;Seed&quot;</span><span class="p">,</span>
    direction <span class="o">=</span> <span class="s">&quot;wide&quot;</span><span class="p">)</span>

<span class="o">&gt;</span> wide<span class="p">[</span><span class="m">1</span><span class="o">:</span><span class="m">5</span><span class="p">,]</span>
  Seed height.3 height.5 height.10 height.15 height.20 height.25
<span class="m">1</span>  <span class="m">301</span>     <span class="m">4.51</span>    <span class="m">10.89</span>     <span class="m">28.72</span>     <span class="m">41.74</span>     <span class="m">52.70</span>     <span class="m">60.92</span>
<span class="m">2</span>  <span class="m">303</span>     <span class="m">4.55</span>    <span class="m">10.92</span>     <span class="m">29.07</span>     <span class="m">42.83</span>     <span class="m">53.88</span>     <span class="m">63.39</span>
<span class="m">3</span>  <span class="m">305</span>     <span class="m">4.79</span>    <span class="m">11.37</span>     <span class="m">30.21</span>     <span class="m">44.40</span>     <span class="m">55.82</span>     <span class="m">64.10</span>
<span class="m">4</span>  <span class="m">307</span>     <span class="m">3.91</span>     <span class="m">9.48</span>     <span class="m">25.66</span>     <span class="m">39.07</span>     <span class="m">50.78</span>     <span class="m">59.07</span>
<span class="m">5</span>  <span class="m">309</span>     <span class="m">4.81</span>    <span class="m">11.20</span>     <span class="m">28.66</span>     <span class="m">41.66</span>     <span class="m">53.31</span>     <span class="m">63.05</span>
</pre></div>


<h2>Create Variables</h2>
<p>Then we want to create new columns showing how much each tree has grown between data points. For example, instead of knowing a tree's height at age 10, we want to know how much it's grown between age 5 and age 10, so that can be a bar in our graph.</p>
<div class="highlight"><pre>wide<span class="o">$</span>h0.3 <span class="o">&lt;-</span> wide<span class="o">$</span>height.3
wide<span class="o">$</span>h3.5 <span class="o">&lt;-</span> wide<span class="o">$</span>height.5 <span class="o">-</span> wide<span class="o">$</span>height.3
wide<span class="o">$</span>h5.10 <span class="o">&lt;-</span> wide<span class="o">$</span>height.10 <span class="o">-</span> wide<span class="o">$</span>height.5
wide<span class="o">$</span>h10.15 <span class="o">&lt;-</span> wide<span class="o">$</span>height.15 <span class="o">-</span> wide<span class="o">$</span>height.10
wide<span class="o">$</span>h15.20 <span class="o">&lt;-</span> wide<span class="o">$</span>height.20 <span class="o">-</span> wide<span class="o">$</span>height.15
wide<span class="o">$</span>h20.25 <span class="o">&lt;-</span> wide<span class="o">$</span>height.25 <span class="o">-</span> wide<span class="o">$</span>height.20
</pre></div>


<h2>Plot Stacked Bar Chart</h2>
<p>Finally, we want to plot all the new data points:</p>
<div class="highlight"><pre><span class="kn">library</span><span class="p">(</span>RColorBrewer<span class="p">)</span>
sequential <span class="o">&lt;-</span> brewer.pal<span class="p">(</span><span class="m">6</span><span class="p">,</span> <span class="s">&quot;BuGn&quot;</span><span class="p">)</span>
barplot<span class="p">(</span><span class="kp">t</span><span class="p">(</span>wide<span class="p">[,</span><span class="m">8</span><span class="o">:</span><span class="m">13</span><span class="p">]),</span>
    names.arg <span class="o">=</span> wide<span class="o">$</span>Seed<span class="p">,</span> <span class="c1"># x-axis labels</span>
    cex.names <span class="o">=</span> <span class="m">0.7</span><span class="p">,</span> <span class="c1"># makes x-axis labels small enough to show all</span>
    col <span class="o">=</span> sequential<span class="p">,</span> <span class="c1"># colors</span>
    xlab <span class="o">=</span> <span class="s">&quot;Seed Source&quot;</span><span class="p">,</span>
    ylab <span class="o">=</span> <span class="s">&quot;Height, Feet&quot;</span><span class="p">,</span>
    xlim <span class="o">=</span> <span class="kt">c</span><span class="p">(</span><span class="m">0</span><span class="p">,</span><span class="m">20</span><span class="p">),</span> <span class="c1"># these two lines allow space for the legend</span>
    width <span class="o">=</span> <span class="m">1</span><span class="p">)</span> <span class="c1"># these two lines allow space for the legend</span>
legend<span class="p">(</span><span class="s">&quot;bottomright&quot;</span><span class="p">,</span> 
    legend <span class="o">=</span> <span class="kt">c</span><span class="p">(</span><span class="s">&quot;20-25&quot;</span><span class="p">,</span> <span class="s">&quot;15-20&quot;</span><span class="p">,</span> <span class="s">&quot;10-15&quot;</span><span class="p">,</span> <span class="s">&quot;5-10&quot;</span><span class="p">,</span> <span class="s">&quot;3-5&quot;</span><span class="p">,</span> <span class="s">&quot;0-3&quot;</span><span class="p">),</span> <span class="c1">#in order from top to bottom</span>
    fill <span class="o">=</span> sequential<span class="p">[</span><span class="m">6</span><span class="o">:</span><span class="m">1</span><span class="p">],</span> <span class="c1"># 6:1 reorders so legend order matches graph</span>
    title <span class="o">=</span> <span class="s">&quot;Years&quot;</span><span class="p">)</span>
</pre></div>


<p><img alt="Stacked bar chart" src="/images/r-stacked-bars.png" /></p>
<p>If you decide you'd rather have clustered bars instead of stacked bars, you can just add the option <code>beside = TRUE</code> to the <code>barplot</code>.</p>
<p>The full code is available in a <a href="https://gist.github.com/4263515">gist</a>.</p>
<h2>Citations and Further Reading</h2>
<ul>
<li>Reshape<ul>
<li><a href="http://stat.ethz.ch/R-manual/R-patched/library/stats/html/reshape.html">http://stat.ethz.ch/R-manual/R-patched/library/stats/html/reshape.html</a></li>
</ul>
</li>
<li>Stacked bar graphs<ul>
<li><a href="http://www.cs.grinnell.edu/~rebelsky/Courses/MAT115/2008S/R/stacked-bar-graphs.html">http://www.cs.grinnell.edu/~rebelsky/Courses/MAT115/2008S/R/stacked-bar-graphs.html</a></li>
<li><a href="http://www.harding.edu/fmccown/r/#barcharts">http://www.harding.edu/fmccown/r/#barcharts</a></li>
</ul>
</li>
</ul>
		</div> <!--/#entry-content-->
    		<span class="tag-links"><strong>Tagged</strong>
 <a href="/tag/barplot.html" rel="tag">barplot</a>,  <a href="/tag/datasets.html" rel="tag">datasets</a>,  <a href="/tag/legend.html" rel="tag">legend</a>,  <a href="/tag/r.html" rel="tag">R</a>,  <a href="/tag/rcolorbrewer.html" rel="tag">RColorBrewer</a>,  <a href="/tag/visualization.html" rel="tag">visualization</a>    		</span>
	</div> <!--/#main-->
</div>  <!--/#post--><div class="post type-post status-publish format-standard hentry category-general" id="post">
	<div class="entry-meta">
		<div class="date"><a href="/2012/12/mapping-gps-tracks-in-google-earth.html">Thu 20 December 2012</a></div>
		<span class="byline">By <a href="/author/mollie-taylor.html">Mollie Taylor</a></span>
			<span class="cat-links"><a href="/category/.html" title="View all posts in " rel="category tag"></a></span>
	</div> <!-- /#entry-meta -->
	<div class="main">
		<h2 class="entry-title">
			<a href="/2012/12/mapping-gps-tracks-in-google-earth.html" title="Permalink to Mapping GPS Tracks in Google Earth" rel="bookmark">Mapping GPS Tracks in Google Earth</a>
		</h2>
		<div class="entry-content">
			<p>Even though I find the <a href="/2012/12/mapping-gps-tracks-in-r.html">R solution</a> easier, I'm sure not everyone agrees with me, so here's the Google Earth way to import a bunch of GPS tracks and map them:</p>
<h2>Export to TCX</h2>
<p>From inside Garmin Training Center or other GPS device software, export a huge TCX file with all your tracks.</p>
<h2>Mapping in Google Earth</h2>
<p><img alt="Opening your TCX file" class="size-auto" src="/images/earth-gpx-open.png" /></p>
<p>Select File -&gt; Open. Change the dropbox for "Files of type" to "Gps", and then find your file and open it. Make sure the "Create KML LineStrings" box is checked and the "Create KML Tracks" box is unchecked. This will save us some work later.</p>
<p><img alt="Import settings" class="size-auto" src="/images/earth-gpx-import.png" /></p>
<p>Next, zoom in, zoom out, and recenter as desired. If you want North to be up, you can click the "N" in the compass in the upper right. </p>
<p>In the layers (bottom left), I personally like to check Roads and uncheck everything else.</p>
<p>In the places (just above layers), right click "GPS device" and select "Properties". Click over to the "Style, Color" tab, and then click "Share Style".</p>
<p><img alt="Share style" class="size-auto" src="/images/earth-gpx-style.png" /></p>
<p>I like to use the following settings:</p>
<p>Lines:</p>
<ul>
<li>Color: red</li>
<li>Width: 3.0</li>
<li>Opacity: 100%</li>
</ul>
<p>Label:</p>
<ul>
<li>Opacity: 0%</li>
</ul>
<p>Icon:</p>
<ul>
<li>Opacity: 0%</li>
</ul>
<p><img alt="Example style and color settings" class="size-auto" src="/images/earth-gpx-settings.png" /></p>
<p>Make sure you've selected all the dates you want on the date slider. Then you can select "Print" to export to a PDF, or you can take a screenshot.</p>
<p><img alt="Export image" class="size-auto" src="/images/earth-gpx-export.png" /></p>
<p><img alt="Date slider and final map" class="size-auto" src="/images/earth-gpx-final.png" /></p>
<p>And that's all there is to it. Large maps may take a long time to load and edit.</p>
<blockquote>
<p>This post is one part of <a href="http://blog.mollietaylor.com/tag/series-gps-tracks.html">my series on Mapping GPS Tracks</a>.</p>
</blockquote>
		</div> <!--/#entry-content-->
    		<span class="tag-links"><strong>Tagged</strong>
 <a href="/tag/google-earth.html" rel="tag">Google Earth</a>,  <a href="/tag/series-gps-tracks.html" rel="tag">Series: GPS Tracks</a>,  <a href="/tag/visualization.html" rel="tag">visualization</a>    		</span>
	</div> <!--/#main-->
</div>  <!--/#post--><div class="post type-post status-publish format-standard hentry category-general" id="post">
	<div class="entry-meta">
		<div class="date"><a href="/2012/12/mapping-gps-tracks-in-r.html">Thu 13 December 2012</a></div>
		<span class="byline">By <a href="/author/mollie-taylor.html">Mollie Taylor</a></span>
			<span class="cat-links"><a href="/category/r.html" title="View all posts in R" rel="category tag">R</a></span>
	</div> <!-- /#entry-meta -->
	<div class="main">
		<h2 class="entry-title">
			<a href="/2012/12/mapping-gps-tracks-in-r.html" title="Permalink to Mapping GPS Tracks in R" rel="bookmark">Mapping GPS Tracks in R</a>
		</h2>
		<div class="entry-content">
			<p>This is an explanation of how I used R to combine all my GPS cycling tracks from my Garmin Forerunner 305.</p>
<h2>Converting to CSV</h2>
<p>You can convert pretty much any GPS data to .csv by using <a href="http://www.gpsbabel.org/htmldoc-1.4.4/readme.html">GPSBabel</a>. For importing directly from my Garmin, I used the command:</p>
<div class="highlight"><pre><span class="go">gpsbabel -t -i garmin -f usb: -o unicsv -F out.csv</span>
</pre></div>


<p>[Note: you'll probably need to work as root to access your device directly]</p>
<p>For importing from a .tcx file, you can use:</p>
<div class="highlight"><pre><span class="go">gpsbabel -t -i gtrnctr -f test2.tcx -o unicsv -F old.csv</span>
</pre></div>


<h2>Mapping in R</h2>
<p>After converting to .csv, we'll have a file with several columns, such as latitude, longitude, date, and time. We can now easily import this into R.</p>
<div class="highlight"><pre>gps <span class="o">&lt;-</span> read.csv<span class="p">(</span><span class="s">&quot;out.csv&quot;</span><span class="p">,</span> 
    header <span class="o">=</span> <span class="kc">TRUE</span><span class="p">)</span>
</pre></div>


<p>Next we want to load up ggmap and get our base map. To determine how zoomed in we are, we can set <code>zoom</code> and <code>size</code>. We can also choose the <code>maptype</code>, with options of terrain, satellite, roadmap, or hybrid (satellite + roadmap).</p>
<div class="highlight"><pre><span class="kn">library</span><span class="p">(</span>ggmap<span class="p">)</span>
mapImageData <span class="o">&lt;-</span> get_googlemap<span class="p">(</span>center <span class="o">=</span> <span class="kt">c</span><span class="p">(</span>lon <span class="o">=</span> median<span class="p">(</span>gps<span class="o">$</span>Longitude<span class="p">),</span> lat <span class="o">=</span> median<span class="p">(</span>gps<span class="o">$</span>Latitude<span class="p">)),</span>
    zoom <span class="o">=</span> <span class="m">11</span><span class="p">,</span>
<span class="c1"># size = c(500, 500),</span>
    maptype <span class="o">=</span> <span class="kt">c</span><span class="p">(</span><span class="s">&quot;terrain&quot;</span><span class="p">))</span>
</pre></div>


<p>I chose to set the <code>center</code> of the map to the median of my latitudes and the median of my longitudes. I've done some biking when traveling, so median made more sense for me than mean.
Finally we want to map our GPS data. There are several <a href="http://www.endmemo.com/program/R/pchsymbols.php"><code>pch</code> options</a> to try.</p>
<div class="highlight"><pre>ggmap<span class="p">(</span>mapImageData<span class="p">,</span>
    extent <span class="o">=</span> <span class="s">&quot;device&quot;</span><span class="p">)</span> <span class="o">+</span> <span class="c1"># takes out axes, etc.</span>
    geom_point<span class="p">(</span>aes<span class="p">(</span>x <span class="o">=</span> Longitude<span class="p">,</span>
        y <span class="o">=</span> Latitude<span class="p">),</span>
    data <span class="o">=</span> gps<span class="p">,</span>
    colour <span class="o">=</span> <span class="s">&quot;red&quot;</span><span class="p">,</span>
    size <span class="o">=</span> <span class="m">1</span><span class="p">,</span>
</pre></div>


<p><img alt="All my metro Atlanta bike rides" src="/images/r-gps-tracks.png" /></p>
<p>Previously, I've used Google Earth to create these maps, but I actually found it to be easier and way less time and resource efficient to do it in R. The only tricky part was converting the data into .csv, and there are <a href="http://www.gpsvisualizer.com/convert_input?convert_output=gpx">other ways</a> to do that, if GPSBabel isn't working for you. You might also be interested in trying <a href="/2012/12/mapping-gps-tracks-in-google-earth.html">Google Earth</a> for mapping your tracks, instead of R.</p>
<p><a href="https://gist.github.com/4210660">Here's the gist</a> with the code.</p>
<blockquote>
<p>This post is one part of <a href="http://blog.mollietaylor.com/tag/series-gps-tracks.html">my series on Mapping GPS Tracks</a>.</p>
</blockquote>
<h2>Citations and Further Reading</h2>
<ul>
<li><a href="http://www.gpsbabel.org/htmldoc-1.4.4/readme.html">http://www.gpsbabel.org/htmldoc-1.4.4/readme.html</a></li>
<li><a href="http://www.olberg.se/?q=node/25">http://www.olberg.se/?q=node/25</a></li>
<li><a href="http://stackoverflow.com/questions/11648870/offline-plotting-of-map-coordinates-on-static-maps-of-google">http://stackoverflow.com/questions/11648870/offline-plotting-of-map-coordinates-on-static-maps-of-google</a></li>
<li><a href="http://stackoverflow.com/questions/11590193/saving-image-in-ggplot-ggmap">http://stackoverflow.com/questions/11590193/saving-image-in-ggplot-ggmap</a></li>
</ul>
<p>pch = 20)</p>
		</div> <!--/#entry-content-->
    		<span class="tag-links"><strong>Tagged</strong>
 <a href="/tag/geom_point.html" rel="tag">geom_point</a>,  <a href="/tag/ggmap.html" rel="tag">ggmap</a>,  <a href="/tag/gpsbabel.html" rel="tag">GPSBabel</a>,  <a href="/tag/r.html" rel="tag">R</a>,  <a href="/tag/series-gps-tracks.html" rel="tag">Series: GPS Tracks</a>,  <a href="/tag/visualization.html" rel="tag">visualization</a>    		</span>
	</div> <!--/#main-->
</div>  <!--/#post--><div class="post type-post status-publish format-standard hentry category-general" id="post">
	<div class="entry-meta">
		<div class="date"><a href="/2012/12/workflowy-or-how-i-organize-everything.html">Thu 06 December 2012</a></div>
		<span class="byline">By <a href="/author/mollie-taylor.html">Mollie Taylor</a></span>
			<span class="cat-links"><a href="/category/.html" title="View all posts in " rel="category tag"></a></span>
	</div> <!-- /#entry-meta -->
	<div class="main">
		<h2 class="entry-title">
			<a href="/2012/12/workflowy-or-how-i-organize-everything.html" title="Permalink to WorkFlowy (or How I Organize Everything)" rel="bookmark">WorkFlowy (or How I Organize Everything)</a>
		</h2>
		<div class="entry-content">
			<p>Being organized is crucial to doing a PhD.</p>
<p>One of the main ways I get and stay organized is by using <a href="https://workflowy.com/?ref=8a2f747">WorkFlowy</a>. WorkFlowy is a simple (perhaps startlingly simple) webapp that can function as to-do list, planning software, and outliner.</p>
<p>I've tried tons of to-do apps for desktop and mobile, but I've found I always revert to post-its and a todo.txt. WorkFlowy is the first service I've found that has changed that. It's pretty similar to a text file, but easier to navigate.</p>
<iframe width="420" height="315" src="//www.youtube.com/embed/CSmbnaPZVHE" frameborder="0" allowfullscreen></iframe>

<h2>How I use WorkFlowy</h2>
<h3>To-do list</h3>
<p>For my to-do list, I have one list for each week and then one list inside that for each day. It's easy to move stuff from day to day. When I finish items, I check them off.</p>
<p><img alt="Daily" src="/images/workflowy-daily.png" /></p>
<p>When I'm finished with a week, I move it to a completed list at the bottom of my WorkFlowy. Since I mark off items as I finish them instead of deleting them, this gives me a quick way to look through and see what I've accomplished in the past week. This is helpful for self-assessment and for preparing for meetings with committee members.</p>
<p><img alt="Completed" src="/images/workflowy-completed.png" /></p>
<p>You can also get WorkFlowy to send you a daily email with summaries of your changes.</p>
<p><img alt="Settings" src="/images/workflowy-settings.png" /></p>
<h3>Organizing papers</h3>
<p>I tend toward being an excessive outliner. I outline my papers or sections of papers down to the paragraph or even sentence level before I write them. Some people prefer the edit-and-edit-again route, but I've found that outlining works better for me, personally.</p>
<p>In the preliminary stages of a paper, I use WorkFlowy for my outlines.</p>
<p>I have one list for each paper I have planned. Inside each list, I include things like a summary of the paper, research questions, hypotheses, possible data sources, variables, literature citations, possible cases to analyze, and a to-do list of things I need to remember to do.</p>
<p><img alt="Papers" src="/images/workflowy-paper-list.png" /></p>
<h2>Other features</h2>
<h3>Sharing</h3>
<p>WorkFlowy lists can also be shared and used for collaboration. Free accounts can share through links that are accessible to anyone using the link. This link feature can either allow other people to edit the list or only view it. Paid accounts can also share privately to email addresses, with login required to view or edit.</p>
<h3>Backup</h3>
<p>Paid accounts can have automatic backup to Dropbox. Any user can export manually as text at any time.</p>
		</div> <!--/#entry-content-->
    		<span class="tag-links"><strong>Tagged</strong>
 <a href="/tag/organization.html" rel="tag">organization</a>,  <a href="/tag/workflowy.html" rel="tag">WorkFlowy</a>    		</span>
	</div> <!--/#main-->
</div>  <!--/#post--><div class="post type-post status-publish format-standard hentry category-general" id="post">
	<div class="entry-meta">
		<div class="date"><a href="/2012/11/sorting-within-lattice-graphics-in-r.html">Thu 29 November 2012</a></div>
		<span class="byline">By <a href="/author/mollie-taylor.html">Mollie Taylor</a></span>
			<span class="cat-links"><a href="/category/r.html" title="View all posts in R" rel="category tag">R</a></span>
	</div> <!-- /#entry-meta -->
	<div class="main">
		<h2 class="entry-title">
			<a href="/2012/11/sorting-within-lattice-graphics-in-r.html" title="Permalink to Sorting Within Lattice Graphics in R" rel="bookmark">Sorting Within Lattice Graphics in R</a>
		</h2>
		<div class="entry-content">
			<h2>Default</h2>
<p>By default, <strong>lattice</strong> sorts the observations by the axis values, starting at the bottom left.</p>
<p>For example,</p>
<div class="highlight"><pre><span class="kn">library</span><span class="p">(</span>lattice<span class="p">)</span>
colors <span class="o">=</span> <span class="kt">c</span><span class="p">(</span><span class="s">&quot;#1B9E77&quot;</span><span class="p">,</span> <span class="s">&quot;#D95F02&quot;</span><span class="p">,</span> <span class="s">&quot;#7570B3&quot;</span><span class="p">)</span>
dotplot<span class="p">(</span><span class="kp">rownames</span><span class="p">(</span>mtcars<span class="p">)</span> <span class="o">~</span> mpg<span class="p">,</span>
    data <span class="o">=</span> mtcars<span class="p">,</span>
    col <span class="o">=</span> colors<span class="p">[</span><span class="m">1</span><span class="p">],</span>
    pch <span class="o">=</span> <span class="m">1</span><span class="p">)</span>
</pre></div>


<p>produces:</p>
<p><img alt="Default lattice dotplot" src="/images/r-lattice-default.png" /></p>
<p>(Note: The <code>rownames(cars)</code> bit is just because of how this data set is stored. For your data, you might just type the variable name (<code>model</code>, for example) instead.)</p>
<h2>Graphing one variable, sorting by another</h2>
<p>If we want to show the same data, but we want to sort by another variable (or the same variable, for that matter), we can just add <code>reorder(yvar, sortvar)</code>. For example, to sort by the number of cylinders, we could:</p>
<div class="highlight"><pre>dotplot<span class="p">(</span>reorder<span class="p">(</span><span class="kp">rownames</span><span class="p">(</span>mtcars<span class="p">),</span> cyl<span class="p">)</span> <span class="o">~</span> mpg<span class="p">,</span>
    data <span class="o">=</span> mtcars<span class="p">,</span>
    col <span class="o">=</span> colors<span class="p">[</span><span class="m">1</span><span class="p">],</span>
</pre></div>


<p><img alt="Sorted by number of cylinders" src="/images/r-lattice-by-cyl.png" /></p>
<h2>Graphing two variables</h2>
<p>To better show how this works, let's graph <code>cyl</code> alongside <code>mpg</code>, so we can see how it is sorting:</p>
<div class="highlight"><pre>dotplot<span class="p">(</span>reorder<span class="p">(</span><span class="kp">rownames</span><span class="p">(</span>mtcars<span class="p">),</span> cyl<span class="p">)</span> <span class="o">~</span> mpg <span class="o">+</span> cyl<span class="p">,</span>
    data <span class="o">=</span> mtcars<span class="p">,</span>
    col <span class="o">=</span> colors<span class="p">,</span>
    pch <span class="o">=</span> <span class="kt">c</span><span class="p">(</span><span class="m">1</span><span class="p">,</span> <span class="m">0</span><span class="p">))</span>
    pch <span class="o">=</span> <span class="m">1</span><span class="p">)</span>
</pre></div>


<p><img alt="Graph of mpg and cyl, sorted by cyl" src="/images/r-lattice-mpg-cyl.png" /></p>
<h2>Reverse order</h2>
<p>We can also sort in reverse order, by adding a "-" before the variable name:</p>
<div class="highlight"><pre>dotplot<span class="p">(</span>reorder<span class="p">(</span><span class="kp">rownames</span><span class="p">(</span>mtcars<span class="p">),</span> <span class="o">-</span>cyl<span class="p">)</span> <span class="o">~</span> mpg <span class="o">+</span> cyl<span class="p">,</span>
    data <span class="o">=</span> mtcars<span class="p">,</span>
    col <span class="o">=</span> colors<span class="p">,</span>
    pch <span class="o">=</span> <span class="kt">c</span><span class="p">(</span><span class="m">1</span><span class="p">,</span> <span class="m">0</span><span class="p">))</span>
</pre></div>


<p><img alt="Graph of mpg and cyl, sorted by cyl, reversed" src="/images/r-lattice-mpg-cyl-reverse.png" /></p>
<h2>Adding a legend</h2>
<p>We can also add a legend:</p>
<div class="highlight"><pre>dotplot<span class="p">(</span>reorder<span class="p">(</span><span class="kp">rownames</span><span class="p">(</span>mtcars<span class="p">),</span> <span class="o">-</span>cyl<span class="p">)</span> <span class="o">~</span> mpg <span class="o">+</span> cyl<span class="p">,</span>
    data <span class="o">=</span> mtcars<span class="p">,</span>
    xlab <span class="o">=</span> <span class="s">&quot;&quot;</span><span class="p">,</span>
    col <span class="o">=</span> colors<span class="p">,</span>
    pch <span class="o">=</span> <span class="kt">c</span><span class="p">(</span><span class="m">1</span><span class="p">,</span> <span class="m">0</span><span class="p">),</span>
    key <span class="o">=</span> <span class="kt">list</span><span class="p">(</span>points <span class="o">=</span> <span class="kt">list</span><span class="p">(</span>col <span class="o">=</span> colors<span class="p">[</span><span class="m">1</span><span class="o">:</span><span class="m">2</span><span class="p">],</span> pch <span class="o">=</span> <span class="kt">c</span><span class="p">(</span><span class="m">1</span><span class="p">,</span> <span class="m">0</span><span class="p">)),</span>
        text <span class="o">=</span> <span class="kt">list</span><span class="p">(</span><span class="kt">c</span><span class="p">(</span><span class="s">&quot;Miles per gallon&quot;</span><span class="p">,</span> <span class="s">&quot;Number of cylinders&quot;</span><span class="p">)),</span>
        space <span class="o">=</span> <span class="s">&quot;bottom&quot;</span><span class="p">))</span>
</pre></div>


<p><img alt="With legend" src="/images/r-lattice-legend.png" /></p>
<h2>Other lattice types</h2>
<p>The same technique will work with other lattice graphs, such as barchart, bwplot, and stripplot.</p>
<p>Full code available as a <a href="https://gist.github.com/4063837">gist</a>.</p>
		</div> <!--/#entry-content-->
    		<span class="tag-links"><strong>Tagged</strong>
 <a href="/tag/barchart.html" rel="tag">barchart</a>,  <a href="/tag/dotplot.html" rel="tag">dotplot</a>,  <a href="/tag/key.html" rel="tag">key</a>,  <a href="/tag/lattice.html" rel="tag">lattice</a>,  <a href="/tag/legend.html" rel="tag">legend</a>,  <a href="/tag/r.html" rel="tag">R</a>,  <a href="/tag/reorder.html" rel="tag">reorder</a>,  <a href="/tag/visualization.html" rel="tag">visualization</a>    		</span>
	</div> <!--/#main-->
</div>  <!--/#post--><div class="navigation">
		<div class="nav-previous">
				<a href="/author/mollie-taylor3.html">
			<span class="meta-nav">&larr;</span> Newer posts</a>
		</div>		
		<div class="nav-next"><a href="/author/mollie-taylor5.html" >Older posts <span class="meta-nav">&rarr;</span></a></div>
</div>
		</div>
		
		<div id="footer">
			<p>Powered by <a href="http://getpelican.com">Pelican</a>, theme by <a href="http://bunnyman.info">tBunnyMan</a>.</p>
		</div><!-- /#footer -->
	</div><!-- /#container -->
	<div style="display:none"></div>
</body>
</html>