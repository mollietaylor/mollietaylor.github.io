<!DOCTYPE html>
<html lang="en">
<head>
		<title>Maps & Apps &mdash; Articles by Mollie Taylor</title>
		<meta charset="utf-8" />
		<link rel="profile" href="http://gmpg.org/xfn/11" />
		<link rel="stylesheet" type="text/css" href="http://blog.mollietaylor.com/theme/css/style.css" />
		<link rel='stylesheet' id='oswald-css'  href='http://fonts.googleapis.com/css?family=Oswald&#038;ver=3.3.2' type='text/css' media='all' />
		<style type="text/css">
			body.custom-background { background-color: #f5f5f5; }
		</style>
		<link rel="alternate" type="application/atom+xml"
			title="Maps & Apps â€” Flux Atom"
			href="http://blog.mollietaylor.com/" /> 
		<!--[if lte IE 8]><script src="http://blog.mollietaylor.com/theme/js/html5shiv.js"></script><![endif]-->
</head>

<body class="home blog custom-background " >
	<div id="container">
		<div id="header">
				<h1 id="site-title"><a href="http://blog.mollietaylor.com">Maps & Apps</a></h1>
		</div><!-- /#banner -->
		
		<div id="menu">
			<div class="menu-navigation-container">
				<ul id="menu-navigation" class="menu">
						<li class="menu-item menu-item-type-post_type menu-item-object-page"><a href="http://blog.mollietaylor.com/pages/about/index.html">About Mollie</a></li>
						<li class="active" class="menu-item menu-item-type-post_type menu-item-object-page"><a href="http://blog.mollietaylor.com/category/.html"></a></li>
						<li class="menu-item menu-item-type-post_type menu-item-object-page"><a href="http://blog.mollietaylor.com/category/latex.html">LaTeX</a></li>
						<li class="menu-item menu-item-type-post_type menu-item-object-page"><a href="http://blog.mollietaylor.com/category/leaflet.html">Leaflet</a></li>
						<li class="menu-item menu-item-type-post_type menu-item-object-page"><a href="http://blog.mollietaylor.com/category/r.html">R</a></li>

				</ul>
			</div> <!--/#menu-navigation-container-->
		</div><!-- /#menu -->
		
		<div class="page-title">
	<h2>Posted by <span>Mollie Taylor</span> &hellip;</h2>
		</div>
	
		<div id="contents">
<div class="post type-post status-publish format-standard hentry category-general" id="post">
	<div class="entry-meta">
		<div class="date"><a href="http://blog.mollietaylor.com/first-post-with-pelican.html">Tue 13 January 2015</a></div>
		<span class="byline">By <a href="http://blog.mollietaylor.com/author/mollie-taylor.html">Mollie Taylor</a></span>
			<span class="cat-links"><a href="http://blog.mollietaylor.com/category/.html" title="View all posts in " rel="category tag"></a></span>
	</div> <!-- /#entry-meta -->
	<div class="main">
		<h2 class="entry-title">
			<a href="http://blog.mollietaylor.com/first-post-with-pelican.html" title="Permalink to First Post with Pelican" rel="bookmark">First Post with Pelican</a>
		</h2>
		<div class="entry-content">
			<p>Let's see if it works!</p>
		</div> <!--/#entry-content-->
    		<span class="tag-links"><strong>Tagged</strong>
 <a href="http://blog.mollietaylor.com/tag/pelican.html" rel="tag">Pelican</a>,  <a href="http://blog.mollietaylor.com/tag/python.html" rel="tag">Python</a>    		</span>
	</div> <!--/#main-->
</div>  <!--/#post--><div class="post type-post status-publish format-standard hentry category-general" id="post">
	<div class="entry-meta">
		<div class="date"><a href="http://blog.mollietaylor.com/2014/10/book-review-leafletjs-essentials-by.html">Fri 10 October 2014</a></div>
		<span class="byline">By <a href="http://blog.mollietaylor.com/author/mollie-taylor.html">Mollie Taylor</a></span>
			<span class="cat-links"><a href="http://blog.mollietaylor.com/category/leaflet.html" title="View all posts in Leaflet" rel="category tag">Leaflet</a></span>
	</div> <!-- /#entry-meta -->
	<div class="main">
		<h2 class="entry-title">
			<a href="http://blog.mollietaylor.com/2014/10/book-review-leafletjs-essentials-by.html" title="Permalink to Book Review: Leaflet.js Essentials by Paul Crickard III" rel="bookmark">Book Review: Leaflet.js Essentials by Paul Crickard III</a>
		</h2>
		<div class="entry-content">
			<p>This is a review of <a href="https://www.packtpub.com/application-development/leafletjs-essentials">Leaflet.js Essentials</a> by Paul Crickard III.</p>
<h2>Contents</h2>
<ul>
<li>Chapter 1 introduces creating a basic map from scratch with leaflet, how to use map tiles, how to create popups, and how to enable geolocation. </li>
<li>Chapter 2 shows how to create GeoJSON data, how to style GeoJSON layers by type (LineString, Polygon, etc.), and how to filter to display only a subset of the data. </li>
<li>Chapter 3 introduces the leaflet.heat plugin for density heat maps and the heatmap.js library for intensity heat maps. It also teaches how to style and animate heat maps, how to create choropleths, and how to use buttons outside the map to change what's shown in the map. </li>
<li>Chapter 4 introduces how to create custom markers and marker shadows as well as several markers that are available online. We also learn how to cluster markers, animate markers, and create pie or bar chart markers. </li>
<li>Chapter 5 shows how to use many ESRI resources in Leaflet, including map tiles, shapefiles, and geocoding. </li>
<li>Chapter 6 introduces using Node.JS, Python, and C# with leaflet, including getting data via AJAX calls, using MongoDB to save created map points, and creating desktop applications with C#.</li>
</ul>
<h2>Review</h2>
<p>This is a very well laid-out, detailed guide to Leaflet. It is intended for complete newbies to Leaflet, but it provides some very advanced information as well. The book claims you should have some JavaScript knowledge before beginning, but I'm not entirely sure this is necessary, since Leaflet maps rely on only very minimal JavaScript.</p>
<p>I enjoyed the breadth of this book. I think the book does a great job of covering the information a beginner would need. It also provides information on a wide variety of topics like good tips for designing for mobile, a very comprehensive list of map tiles (many of these I did not know about), and information on several JavaScript libraries and Leaflet plug-ins that allow for additional functionality within the maps.</p>
<p>On the other hand, there is one major criticism I have with this book, especially for a beginner audience. I'm not that happy with the included code samples or how they are organized. This may just be personal preference, but I prefer books that have the "before this section" code and the "after this section" code so you can start with the before and then double-check with the after if you made an error or didn't understand something. I feel like the provided code samples made it difficult to follow along with programming while reading.</p>
<p>All in all, I wouldn't hesitate to recommend this book to someone beginning to learn Leaflet. For more advanced Leaflet users, there are some gems that may or may not make the book a worthwhile purchase. I will say that I use Leaflet almost every day, and I did learn several things from reading Leaflet.js Essentials.</p>
<p>4 out of 5 stars</p>
		</div> <!--/#entry-content-->
    		<span class="tag-links"><strong>Tagged</strong>
 <a href="http://blog.mollietaylor.com/tag/book-review.html" rel="tag">book review</a>,  <a href="http://blog.mollietaylor.com/tag/leaflet.html" rel="tag">Leaflet</a>    		</span>
	</div> <!--/#main-->
</div>  <!--/#post--><div class="post type-post status-publish format-standard hentry category-general" id="post">
	<div class="entry-meta">
		<div class="date"><a href="http://blog.mollietaylor.com/2014/03/add-icons-to-layer-control-in-leaflet.html">Thu 27 March 2014</a></div>
		<span class="byline">By <a href="http://blog.mollietaylor.com/author/mollie-taylor.html">Mollie Taylor</a></span>
			<span class="cat-links"><a href="http://blog.mollietaylor.com/category/leaflet.html" title="View all posts in Leaflet" rel="category tag">Leaflet</a></span>
	</div> <!-- /#entry-meta -->
	<div class="main">
		<h2 class="entry-title">
			<a href="http://blog.mollietaylor.com/2014/03/add-icons-to-layer-control-in-leaflet.html" title="Permalink to Add Icons to Layer Control in Leaflet" rel="bookmark">Add Icons to Layer Control in Leaflet</a>
		</h2>
		<div class="entry-content">
			<p>When you have multiple layers, it can help to add a legend to the map. This tutorial shows how to add icons to the layer control in Leaflet. This tutorial shows only marker layers, but you could create icons for polygon layers and use those as well.</p>
<p><img alt="Legend with marker icons" src="http://blog.mollietaylor.com/images/add-icons-layer-control-legend.png" /></p>
<p>The following code sets up our map, layers, and the layer control. This is the standard way maps look in Leaflet, with no visual indication of which layer goes with which markers, without checking the boxes on and off.</p>
<div class="highlight"><pre><span class="kd">var</span> <span class="nx">map</span> <span class="o">=</span> <span class="nx">L</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="s1">&#39;map&#39;</span><span class="p">,</span> <span class="p">{</span>
    <span class="nx">center</span><span class="o">:</span> <span class="p">[</span><span class="mf">33.8</span><span class="p">,</span> <span class="o">-</span><span class="mf">84.4</span><span class="p">],</span>
    <span class="nx">zoom</span><span class="o">:</span> <span class="mi">11</span><span class="p">,</span>
        <span class="nx">layers</span><span class="o">:</span> <span class="p">[</span><span class="nx">trainLayer</span><span class="p">,</span> <span class="nx">treeLayer</span><span class="p">]</span>
<span class="p">});</span>

<span class="kd">var</span> <span class="nx">overlayMaps</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;Train&quot;</span><span class="o">:</span> <span class="nx">trainLayer</span><span class="p">,</span>
    <span class="s2">&quot;Tree&quot;</span><span class="o">:</span> <span class="nx">treeLayer</span>
<span class="p">};</span>

<span class="nx">L</span><span class="p">.</span><span class="nx">control</span><span class="p">.</span><span class="nx">layers</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="nx">overlayMaps</span><span class="p">,</span> <span class="p">{</span>
    <span class="nx">collapsed</span><span class="o">:</span> <span class="kc">false</span>
<span class="p">}).</span><span class="nx">addTo</span><span class="p">(</span><span class="nx">map</span><span class="p">);</span>
</pre></div>


<p><img alt="Default legend" src="http://blog.mollietaylor.com/images/add-icons-layer-control-no-legend.png" /></p>
<p>In order to add a legend to the layer control, you can simply change the overlayMaps code to add any HTML you'd like. In this case, we'll add the map icon pngs with a small height so they will look okay in the layer control:</p>
<div class="highlight"><pre><span class="kd">var</span> <span class="nx">overlayMaps</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;&lt;img src=&#39;http://mollietaylor.com/skills/js/leaflet/train.png&#39; height=24&gt;Train&quot;</span><span class="o">:</span> <span class="nx">trainLayer</span><span class="p">,</span>
    <span class="s2">&quot;&lt;img src=&#39;http://mollietaylor.com/skills/js/leaflet/arbol.png&#39; height=24&gt;Tree&quot;</span><span class="o">:</span> <span class="nx">treeLayer</span>
<span class="p">};</span>
</pre></div>


<p>It's really that simple! I searched the documentation and the web, and I couldn't figure out how to do this, so I figured I'd just try adding the HTML. Turns out it looks great!</p>
<p>Full code available on <a href="http://codepen.io/mollie/pen/wEvbd">CodePen</a>. Map icons by <a href="http://mapicons.nicolasmollet.com/">Nicolas Mollet and Axel Rodriguez</a>.</p>
		</div> <!--/#entry-content-->
    		<span class="tag-links"><strong>Tagged</strong>
 <a href="http://blog.mollietaylor.com/tag/javascript.html" rel="tag">Javascript</a>,  <a href="http://blog.mollietaylor.com/tag/lcontrollayers.html" rel="tag">L.control.layers</a>,  <a href="http://blog.mollietaylor.com/tag/leaflet.html" rel="tag">Leaflet</a>,  <a href="http://blog.mollietaylor.com/tag/overlaymaps.html" rel="tag">overlayMaps</a>    		</span>
	</div> <!--/#main-->
</div>  <!--/#post--><div class="post type-post status-publish format-standard hentry category-general" id="post">
	<div class="entry-meta">
		<div class="date"><a href="http://blog.mollietaylor.com/2014/03/changing-leaflet-slidemapper-to-side-by.html">Thu 13 March 2014</a></div>
		<span class="byline">By <a href="http://blog.mollietaylor.com/author/mollie-taylor.html">Mollie Taylor</a></span>
			<span class="cat-links"><a href="http://blog.mollietaylor.com/category/leaflet.html" title="View all posts in Leaflet" rel="category tag">Leaflet</a></span>
	</div> <!-- /#entry-meta -->
	<div class="main">
		<h2 class="entry-title">
			<a href="http://blog.mollietaylor.com/2014/03/changing-leaflet-slidemapper-to-side-by.html" title="Permalink to Changing Leaflet Slidemapper to a Side-by-Side View" rel="bookmark">Changing Leaflet Slidemapper to a Side-by-Side View</a>
		</h2>
		<div class="entry-content">
			<p>The default setup in <a href="https://github.com/cavis/slidemapper">slidemapper</a> is to have the slides either above or below the map. However, it is also possible to place the slides to one side of the map.</p>
<p><img alt="Slides beside map" class="size-auto" src="http://blog.mollietaylor.com/images/slidemapper-side.png" /></p>
<h2>CSS changes</h2>
<p>We need to make a couple of changes to how the smapp-show and smapp-map classes are displayed. You'll want to play around with these some, but this is what worked well for me:</p>
<div class="highlight"><pre><span class="nc">.smapp-show</span> <span class="p">{</span> 
    <span class="k">width</span><span class="o">:</span><span class="m">50%</span><span class="p">;</span> 
<span class="p">}</span>
<span class="nc">.smapp-show</span> <span class="nc">.slide</span> <span class="p">{</span> 
    <span class="k">overflow-y</span><span class="o">:</span><span class="k">visible</span><span class="p">;</span> 
<span class="p">}</span>
<span class="nc">.smapp-map</span> <span class="p">{</span> 
    <span class="k">margin</span><span class="o">:</span><span class="m">10px</span><span class="p">;</span> 
    <span class="k">width</span><span class="o">:</span><span class="m">48%</span><span class="p">;</span> 
    <span class="k">height</span><span class="o">:</span><span class="m">95%</span><span class="p">;</span> 
    <span class="k">position</span><span class="o">:</span><span class="k">absolute</span><span class="p">;</span> 
    <span class="k">top</span><span class="o">:</span><span class="m">0</span><span class="p">;</span> 
    <span class="k">right</span><span class="o">:</span><span class="m">0</span><span class="p">;</span> 
<span class="p">}</span>
</pre></div>


<h2>Slidemapper changes</h2>
<p>On the slidemapper side of things, the only edit we need to make is changing the options of our slideshow. Specifically, we need to edit the slideHeight and mapHeight to something appropriate for having the slides beside the map. For example, I chose:</p>
<div class="highlight"><pre><span class="nx">$mySlideMap</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#slideshow-container&#39;</span><span class="p">).</span><span class="nx">slideMapper</span><span class="p">({</span>
    <span class="nx">slideHeight</span><span class="o">:</span> <span class="mi">540</span><span class="p">,</span>
    <span class="nx">mapHeight</span><span class="o">:</span> <span class="s1">&#39;98%&#39;</span>
<span class="p">});</span>
</pre></div>


<p>And that's all the changes you need to make to have a side-by-side slideshow in slidemapper! The full code is available as <a href="https://gist.github.com/mollietaylor/9128521">a gist</a>.</p>
<h2>References</h2>
<ul>
<li><a href="https://github.com/cavis/slidemapper">https://github.com/cavis/slidemapper</a></li>
</ul>
		</div> <!--/#entry-content-->
    		<span class="tag-links"><strong>Tagged</strong>
 <a href="http://blog.mollietaylor.com/tag/javascript.html" rel="tag">Javascript</a>,  <a href="http://blog.mollietaylor.com/tag/leaflet.html" rel="tag">Leaflet</a>,  <a href="http://blog.mollietaylor.com/tag/slidemapper.html" rel="tag">slidemapper</a>,  <a href="http://blog.mollietaylor.com/tag/smapp-map.html" rel="tag">smapp-map</a>,  <a href="http://blog.mollietaylor.com/tag/smapp-show.html" rel="tag">smapp-show</a>    		</span>
	</div> <!--/#main-->
</div>  <!--/#post--><div class="post type-post status-publish format-standard hentry category-general" id="post">
	<div class="entry-meta">
		<div class="date"><a href="http://blog.mollietaylor.com/2014/03/link-to-another-slide-in-leaflet.html">Thu 06 March 2014</a></div>
		<span class="byline">By <a href="http://blog.mollietaylor.com/author/mollie-taylor.html">Mollie Taylor</a></span>
			<span class="cat-links"><a href="http://blog.mollietaylor.com/category/leaflet.html" title="View all posts in Leaflet" rel="category tag">Leaflet</a></span>
	</div> <!-- /#entry-meta -->
	<div class="main">
		<h2 class="entry-title">
			<a href="http://blog.mollietaylor.com/2014/03/link-to-another-slide-in-leaflet.html" title="Permalink to Link to Another Slide in Leaflet Slidemapper" rel="bookmark">Link to Another Slide in Leaflet Slidemapper</a>
		</h2>
		<div class="entry-content">
			<p>The <a href="https://github.com/cavis/slidemapper">slidemapper plugin for Leaflet</a> is very useful, but when building large slideshows, it can be annoying that there is no easy way to link to specific slides. For example, you might want to create a table of contents or link from the last slide back to the first. Fortunately, there's a way to move to specific slides, instead of just advancing or moving back by 1. We'll use jQuery to do this. We already have jQuery loaded for slidemapper.</p>
<h2>Specify Where Links Will Go</h2>
<p>After the <code>$mySlideMap</code> code in your html file, you can create a list of links that you will later add to the slides. Generally, this will be the last thing in the <code>&lt;script&gt;</code> tag at the end of the body.</p>
<p>For example, in the sample code from the <a href="https://github.com/cavis/slidemapper">slidemapper example</a>, the <code>&lt;script&gt;</code> initially contains:</p>
<div class="highlight"><pre><span class="nx">$mySlideMap</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#slideshow-container&#39;</span><span class="p">)</span>
<span class="p">.</span><span class="nx">slideMapper</span><span class="p">();</span>

<span class="nx">$mySlideMap</span><span class="p">.</span><span class="nx">slideMapper</span><span class="p">(</span><span class="s1">&#39;add&#39;</span><span class="p">,</span> <span class="nx">EXAMPLEDATA</span><span class="p">);</span>
</pre></div>


<p>At the end of the script, let's add a link to the first slide and a link to the last slide. The jQuery we use allows any code with a specific class to be transformed into a link. We can combine that with the slidemapper move method to create links to specific slides.</p>
<div class="highlight"><pre><span class="nx">$</span><span class="p">(</span><span class="s1">&#39;.toc&#39;</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">$mySlideMap</span><span class="p">.</span><span class="nx">slideMapper</span><span class="p">(</span><span class="s1">&#39;move&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
<span class="p">});</span>

<span class="nx">$</span><span class="p">(</span><span class="s1">&#39;.end&#39;</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">$mySlideMap</span><span class="p">.</span><span class="nx">slideMapper</span><span class="p">(</span><span class="s1">&#39;move&#39;</span><span class="p">,</span> <span class="nx">EXAMPLEDATA</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
<span class="p">});</span>
</pre></div>


<h2>Add the Links</h2>
<p>Next, we need to actually include the links in the slides. The links references will go in the data file. In the example, the file is named data.js.</p>
<p>Here's a link to the last slide from the first slide:</p>
<div class="highlight"><pre>// intro marker
{
    icon: &#39;other.png&#39;,
    marker: [42.516846, -70.898499],
    center: [40.423, -98.7372],
    html: &#39;<span class="nt">&lt;table</span> <span class="na">style=</span><span class="s">&quot;margin:0 40px; padding:10px&quot;</span><span class="nt">&gt;&lt;tr&gt;</span>&#39; +
            &#39;<span class="nt">&lt;td&gt;&lt;img</span> <span class="na">src=</span><span class="s">&quot;http://placehold.it/300x180&amp;text=Map+Stuff&quot;</span><span class="nt">/&gt;&lt;/td&gt;</span>&#39; +
            &#39;<span class="nt">&lt;td</span> <span class="na">style=</span><span class="s">&quot;padding-left:10px&quot;</span><span class="nt">&gt;</span>&#39; +
                &#39;<span class="nt">&lt;h1&gt;</span>SlideMapper FTW!<span class="nt">&lt;/h1&gt;</span>&#39; +
                &#39;<span class="nt">&lt;p&gt;</span>This is a demo of the different sorts of slides you can setup using slidemapper.<span class="nt">&lt;/p&gt;</span>&#39; +
                &#39;<span class="nt">&lt;p&gt;&lt;a</span> <span class="na">class=</span><span class="s">&quot;end&quot;</span><span class="nt">&gt;</span>Skip to the end.<span class="nt">&lt;/a&gt;&lt;/p&gt;</span>&#39; +
            &#39;<span class="nt">&lt;/td&gt;</span>&#39; +
        &#39;<span class="nt">&lt;/tr&gt;&lt;/table&gt;</span>&#39;,
    popup: &#39;So it begins!&#39;
},
</pre></div>


<p>And here's a link from the last slide to the first slide:</p>
<div class="highlight"><pre>// empty slide
{
    html: &#39;<span class="nt">&lt;div</span> <span class="na">style=</span><span class="s">&quot;margin:0 40px; padding:20px 10px&quot;</span><span class="nt">&gt;</span>&#39; +
            &#39;<span class="nt">&lt;div&gt;</span>&#39; +
                &#39;<span class="nt">&lt;h2&gt;</span>The End<span class="nt">&lt;/h2&gt;</span>&#39; +
                &#39;<span class="nt">&lt;p&gt;</span>Goodbye.<span class="nt">&lt;/p&gt;</span>&#39; +
                &#39;<span class="nt">&lt;p&gt;&lt;a</span> <span class="na">class=</span><span class="s">&quot;toc&quot;</span><span class="nt">&gt;</span>Return to Table of Contents.<span class="nt">&lt;/a&gt;&lt;/p&gt;</span>&#39; +
            &#39;<span class="nt">&lt;/div&gt;</span>&#39; +
        &#39;<span class="nt">&lt;/div&gt;</span>&#39;
}
</pre></div>


<h2>Prettifying</h2>
<p>Because of the unusual way these links are made using jQuery, we should probably add some css to make them look like links. I added the following css to the <code>&lt;head&gt;</code>, but you can add any css to the head or as a separate stylesheet.</p>
<div class="highlight"><pre><span class="o">&lt;</span><span class="nt">style</span> <span class="nt">type</span><span class="o">=</span><span class="s2">&quot;text/css&quot;</span><span class="o">&gt;</span>
    <span class="nt">a</span> <span class="p">{</span>
        <span class="k">color</span><span class="o">:</span> <span class="nb">orange</span><span class="p">;</span>
        <span class="k">cursor</span><span class="o">:</span> <span class="k">pointer</span><span class="p">;</span>
        <span class="k">text-decoration</span><span class="o">:</span> <span class="k">underline</span><span class="p">;</span>
    <span class="p">}</span>
<span class="o">&lt;/</span><span class="nt">style</span><span class="o">&gt;</span>
</pre></div>


<p><img alt="Here's an example of a link from one slide to another" class="size-auto" src="http://blog.mollietaylor.com/images/slidemapper-link.png" /></p>
<p>And now you have an easy way to navigate through a long slidemapper deck. You could even create a table of contents at the beginning and then link back to that from each slide.</p>
<p>The full code is available in <a href="https://gist.github.com/mollietaylor/9128328">a gist</a>.</p>
<h2>References</h2>
<ul>
<li><a href="http://stackoverflow.com/questions/950087/how-to-include-a-javascript-file-in-another-javascript-file">http://stackoverflow.com/questions/950087/how-to-include-a-javascript-file-in-another-javascript-file</a></li>
<li><a href="https://github.com/cavis/slidemapper#methods">https://github.com/cavis/slidemapper#methods</a></li>
</ul>
		</div> <!--/#entry-content-->
    		<span class="tag-links"><strong>Tagged</strong>
 <a href="http://blog.mollietaylor.com/tag/class.html" rel="tag">class</a>,  <a href="http://blog.mollietaylor.com/tag/click.html" rel="tag">click</a>,  <a href="http://blog.mollietaylor.com/tag/css.html" rel="tag">CSS</a>,  <a href="http://blog.mollietaylor.com/tag/javascript.html" rel="tag">Javascript</a>,  <a href="http://blog.mollietaylor.com/tag/jquery.html" rel="tag">jQuery</a>,  <a href="http://blog.mollietaylor.com/tag/leaflet.html" rel="tag">Leaflet</a>,  <a href="http://blog.mollietaylor.com/tag/move.html" rel="tag">move</a>,  <a href="http://blog.mollietaylor.com/tag/slidemapper.html" rel="tag">slidemapper</a>    		</span>
	</div> <!--/#main-->
</div>  <!--/#post--><div class="post type-post status-publish format-standard hentry category-general" id="post">
	<div class="entry-meta">
		<div class="date"><a href="http://blog.mollietaylor.com/2014/02/center-map-on-layer-change-in-leaflet.html">Thu 27 February 2014</a></div>
		<span class="byline">By <a href="http://blog.mollietaylor.com/author/mollie-taylor.html">Mollie Taylor</a></span>
			<span class="cat-links"><a href="http://blog.mollietaylor.com/category/leaflet.html" title="View all posts in Leaflet" rel="category tag">Leaflet</a></span>
	</div> <!-- /#entry-meta -->
	<div class="main">
		<h2 class="entry-title">
			<a href="http://blog.mollietaylor.com/2014/02/center-map-on-layer-change-in-leaflet.html" title="Permalink to Center Map on Layer Change in Leaflet" rel="bookmark">Center Map on Layer Change in Leaflet</a>
		</h2>
		<div class="entry-content">
			<p>In Leaflet, it can be helpful to change the bounds of the map when the user adds or changes the visible map layers.</p>
<h2>The Basics</h2>
<p>First, we'll start with the initial code including our map and polygon layers:</p>
<div class="highlight"><pre><span class="kd">var</span> <span class="nx">circle</span> <span class="o">=</span> <span class="nx">L</span><span class="p">.</span><span class="nx">circle</span><span class="p">([</span><span class="mf">51.508</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.11</span><span class="p">],</span> <span class="mi">500</span><span class="p">,</span> <span class="p">{</span>
    <span class="nx">color</span><span class="o">:</span> <span class="s1">&#39;red&#39;</span><span class="p">,</span>
    <span class="nx">fillColor</span><span class="o">:</span> <span class="s1">&#39;#f03&#39;</span><span class="p">,</span>
    <span class="nx">fillOpacity</span><span class="o">:</span> <span class="mf">0.5</span>
<span class="p">});</span>

<span class="kd">var</span> <span class="nx">polygon</span> <span class="o">=</span> <span class="nx">L</span><span class="p">.</span><span class="nx">polygon</span><span class="p">([</span>
    <span class="p">[</span><span class="mf">51.509</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.08</span><span class="p">],</span>
    <span class="p">[</span><span class="mf">51.503</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.06</span><span class="p">],</span>
    <span class="p">[</span><span class="mf">51.51</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.047</span><span class="p">]</span>
<span class="p">]);</span>

<span class="kd">var</span> <span class="nx">map</span> <span class="o">=</span> <span class="nx">L</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="s1">&#39;map&#39;</span><span class="p">,</span> <span class="p">{</span>
    <span class="nx">center</span><span class="o">:</span> <span class="p">[</span><span class="mf">51.505</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.09</span><span class="p">],</span>
    <span class="nx">zoom</span><span class="o">:</span> <span class="mi">13</span>
<span class="p">});</span>

<span class="kd">var</span> <span class="nx">overlayMaps</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;Circle&quot;</span><span class="o">:</span> <span class="nx">circle</span><span class="p">,</span>
    <span class="s2">&quot;Polygon&quot;</span><span class="o">:</span> <span class="nx">polygon</span>
<span class="p">};</span>

<span class="nx">L</span><span class="p">.</span><span class="nx">tileLayer</span><span class="p">(</span><span class="s1">&#39;http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png&#39;</span><span class="p">,</span> <span class="p">{</span>
    <span class="nx">attribution</span><span class="o">:</span> <span class="s1">&#39;&amp;copy; &lt;a href=&quot;http://openstreetmap.org&quot;&gt;OpenStreetMap&lt;/a&gt; contributors, &lt;a href=&quot;http://creativecommons.org/licenses/by-sa/2.0/&quot;&gt;CC-BY-SA&lt;/a&gt;&#39;</span>
<span class="p">}).</span><span class="nx">addTo</span><span class="p">(</span><span class="nx">map</span><span class="p">);</span>

<span class="nx">L</span><span class="p">.</span><span class="nx">control</span><span class="p">.</span><span class="nx">layers</span><span class="p">(</span><span class="nx">overlayMaps</span><span class="p">,</span> <span class="kc">null</span><span class="p">,</span> <span class="p">{</span>
    <span class="nx">collapsed</span><span class="o">:</span> <span class="kc">false</span>
<span class="p">}).</span><span class="nx">addTo</span><span class="p">(</span><span class="nx">map</span><span class="p">);</span>
</pre></div>


<p>So far, most of this should be familiar from the <a href="http://leafletjs.com/examples/quick-start.html">Leaflet Quick Start Guide</a>.</p>
<p>Next, we want to add a listener function that will zoom and re-center upon a change in the circle or polygon layer.</p>
<p>The <code>.on</code> method of <code>map</code> allows you to watch for an event to occur and then execute a function when it does. In this case, we want to wait for the event <code>'baselayerchange'</code>. This way the map will automatically zoom and recenter when the user changes layers.</p>
<div class="highlight"><pre><span class="nx">map</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;baselayerchange&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">e</span><span class="p">);</span>
    <span class="nx">map</span><span class="p">.</span><span class="nx">fitBounds</span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">layer</span><span class="p">);</span>
<span class="p">});</span>
</pre></div>


<p><img alt="The map automatically zooms to the bounds of the shape when the layer is activated." class="size-auto" src="http://blog.mollietaylor.com/images/center-map-circle.png" /></p>
<h2>Options</h2>
<p>There are a few options for exactly how the map is zoomed and/or re-centered and for what type of layers are affected.</p>
<p>If you want to do this with overlay layers instead of base layers, you can substitute <code>'overlayadd'</code> for <code>'baselayerchange'</code>. Using overlay layers is more common for drawing shapes, but treating your layers as base layers makes it easy to display only one at a time.</p>
<div class="highlight"><pre><span class="nx">map</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;overlayadd&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">e</span><span class="p">);</span>
    <span class="nx">map</span><span class="p">.</span><span class="nx">fitBounds</span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">layer</span><span class="p">);</span>
<span class="p">});</span>
</pre></div>


<p><code>fitBounds</code> automatically zooms to the tightest zoom level where the whole shape is visible. If you don't want to use <code>fitBounds</code> (say you're centering on a new overlay layer and don't want to zoom all the way in), you can use <code>setView</code> or <code>panTo</code> instead. <code>panTo</code> animates as the view changes.</p>
<div class="highlight"><pre><span class="nx">map</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;overlayadd&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">e</span><span class="p">);</span>
    <span class="nx">map</span><span class="p">.</span><span class="nx">panTo</span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">layer</span><span class="p">);</span>
<span class="p">});</span>
</pre></div>


<p>And there you have a few different ways to center and/or zoom in when an overlay layer is added or when the baselayer is changed. I'd recommend you <a href="http://leafletjs.com/reference.html">check out the documentation for fitBounds, setView, and panTo</a> and play around with the options. The <a href="http://leafletjs.com/reference.html#control-layers">options for L.control.layers</a> are also helpful. For example, you can set <code>collapsed</code> to false to encourage users to change the layers.</p>
<p>The full code is available in <a href="https://gist.github.com/mollietaylor/9127811">a gist</a>.</p>
<h2>References</h2>
<ul>
<li><a href="http://leafletjs.com/reference.html#map-fitbounds">http://leafletjs.com/reference.html#map-fitbounds</a></li>
<li><a href="http://leafletjs.com/reference.html#control-layers-baselayerchange">http://leafletjs.com/reference.html#control-layers-baselayerchange</a></li>
<li><a href="http://leafletjs.com/reference.html#map-overlayadd">http://leafletjs.com/reference.html#map-overlayadd</a></li>
</ul>
		</div> <!--/#entry-content-->
    		<span class="tag-links"><strong>Tagged</strong>
 <a href="http://blog.mollietaylor.com/tag/baselayerchange.html" rel="tag">baselayerchange</a>,  <a href="http://blog.mollietaylor.com/tag/fitbounds.html" rel="tag">fitBounds</a>,  <a href="http://blog.mollietaylor.com/tag/javascript.html" rel="tag">Javascript</a>,  <a href="http://blog.mollietaylor.com/tag/lcircle.html" rel="tag">L.circle</a>,  <a href="http://blog.mollietaylor.com/tag/leaflet.html" rel="tag">Leaflet</a>,  <a href="http://blog.mollietaylor.com/tag/lpolygon.html" rel="tag">L.polygon</a>,  <a href="http://blog.mollietaylor.com/tag/panto.html" rel="tag">panTo</a>,  <a href="http://blog.mollietaylor.com/tag/setview.html" rel="tag">setView</a>    		</span>
	</div> <!--/#main-->
</div>  <!--/#post--><div class="post type-post status-publish format-standard hentry category-general" id="post">
	<div class="entry-meta">
		<div class="date"><a href="http://blog.mollietaylor.com/2014/02/merge-by-city-and-state-in-r.html">Thu 20 February 2014</a></div>
		<span class="byline">By <a href="http://blog.mollietaylor.com/author/mollie-taylor.html">Mollie Taylor</a></span>
			<span class="cat-links"><a href="http://blog.mollietaylor.com/category/r.html" title="View all posts in R" rel="category tag">R</a></span>
	</div> <!-- /#entry-meta -->
	<div class="main">
		<h2 class="entry-title">
			<a href="http://blog.mollietaylor.com/2014/02/merge-by-city-and-state-in-r.html" title="Permalink to Merge by City and State in R" rel="bookmark">Merge by City and State in R</a>
		</h2>
		<div class="entry-content">
			<p>Often, you'll need to merge two data frames based on multiple variables. For this example, we'll use the common case of needing to merge by city and state.</p>
<p>First, you need to read in both your data sets:</p>
<div class="highlight"><pre><span class="c1"># import city coordinate data:</span>
coords <span class="o">&lt;-</span> read.csv<span class="p">(</span><span class="s">&quot;cities-coords.csv&quot;</span><span class="p">,</span>
    header <span class="o">=</span> <span class="kc">TRUE</span><span class="p">,</span>
    sep <span class="o">=</span> <span class="s">&quot;,&quot;</span><span class="p">)</span>

<span class="c1"># import population data:</span>
data <span class="o">&lt;-</span> read.csv<span class="p">(</span><span class="s">&quot;cities-data.csv&quot;</span><span class="p">,</span>
    header <span class="o">=</span> <span class="kc">TRUE</span><span class="p">,</span>
    sep <span class="o">=</span> <span class="s">&quot;,&quot;</span><span class="p">)</span>
</pre></div>


<p>Next comes the merge. You can use <code>by.x</code> and <code>by.y</code> to declare which variables the merge will be based on. If the variables have exactly the same name in both data sets, you can use by instead of <code>by.x</code> and <code>by.y</code>.</p>
<p><code>x</code> and <code>y</code> represent the two data sets you are merging, in that order.</p>
<p>You also want to state whether you want to include all data from either data set, using <code>all</code> or <code>all.x</code> and <code>all.y</code>. In this case, we want to make sure we hold onto all our city data, even data for the cities we do not have coordinates for.</p>
<div class="highlight"><pre><span class="c1"># merge data &amp; coords by city &amp; state:</span>
dataCoords <span class="o">&lt;-</span> <span class="kp">merge</span><span class="p">(</span>coords<span class="p">,</span> data<span class="p">,</span> 
    by.x <span class="o">=</span> <span class="kt">c</span><span class="p">(</span><span class="s">&quot;City&quot;</span><span class="p">,</span> <span class="s">&quot;State&quot;</span><span class="p">),</span>
    by.y <span class="o">=</span> <span class="kt">c</span><span class="p">(</span><span class="s">&quot;city&quot;</span><span class="p">,</span> <span class="s">&quot;state&quot;</span><span class="p">),</span>
    all.x <span class="o">=</span> <span class="kc">FALSE</span><span class="p">,</span>
    all.y <span class="o">=</span> <span class="kc">TRUE</span><span class="p">)</span>
</pre></div>


<p>Running that code shows what we would expect. Houston is included in the final data set even though there are no coordinates for it, while Dallas is not included since it has coordinates but no data:</p>
<div class="highlight"><pre>            City State Latitude  Longitude year population
<span class="m">1</span>        Chicago    IL <span class="m">41.85003</span>  <span class="m">-87.65005</span> <span class="m">2012</span>    <span class="m">2714856</span>
<span class="m">2</span>       Columbus    GA <span class="m">32.46098</span>  <span class="m">-84.98771</span> <span class="m">2012</span>     <span class="m">198413</span>
<span class="m">3</span>       Columbus    OH <span class="m">39.96118</span>  <span class="m">-82.99879</span> <span class="m">2012</span>     <span class="m">809798</span>
<span class="m">4</span>       Columbus    OH <span class="m">39.96118</span>  <span class="m">-82.99879</span> <span class="m">2010</span>     <span class="m">787033</span>
<span class="m">5</span>    Los Angeles    CA <span class="m">34.05223</span> <span class="m">-118.24368</span> <span class="m">2012</span>    <span class="m">3857799</span>
<span class="m">6</span>       New York    NY <span class="m">40.71427</span>  <span class="m">-74.00597</span> <span class="m">2012</span>    <span class="m">8336697</span>
<span class="m">7</span>       New York    NY <span class="m">40.71427</span>  <span class="m">-74.00597</span> <span class="m">2010</span>    <span class="m">8175133</span>
<span class="m">8</span>  San Francisco    CA <span class="m">37.77823</span> <span class="m">-122.44250</span> <span class="m">2012</span>     <span class="m">825863</span>
<span class="m">9</span>  San Francisco    CA <span class="m">37.77823</span> <span class="m">-122.44250</span> <span class="m">2010</span>     <span class="m">805235</span>
<span class="m">10</span>       Houston    TX       <span class="kc">NA</span>         <span class="kc">NA</span> <span class="m">2012</span>    <span class="m">2160821</span>
</pre></div>


<h2>Bonus</h2>
<p>If you'd like to get a list of which cases got merged in but lack coordinate data, there's a simple line of code to do that:</p>
<div class="highlight"><pre><span class="o">&gt;</span> dataCoords<span class="p">[</span><span class="o">!</span>complete.cases<span class="p">(</span>dataCoords<span class="p">[,</span><span class="kt">c</span><span class="p">(</span><span class="m">3</span><span class="p">,</span><span class="m">4</span><span class="p">)]),]</span>
      City State Latitude Longitude year population
<span class="m">10</span> Houston    TX       <span class="kc">NA</span>        <span class="kc">NA</span> <span class="m">2012</span>    <span class="m">2160821</span>
</pre></div>


<p>Also, you might want to tidy up the names of your variables, if they followed different conventions in their respective initial data sets:</p>
<div class="highlight"><pre><span class="o">&gt;</span> <span class="kp">names</span><span class="p">(</span>dataCoords<span class="p">)</span> <span class="o">&lt;-</span> <span class="kt">c</span><span class="p">(</span><span class="s">&quot;City&quot;</span><span class="p">,</span> <span class="s">&quot;State&quot;</span><span class="p">,</span> <span class="s">&quot;Latitude&quot;</span><span class="p">,</span> <span class="s">&quot;Longitude&quot;</span><span class="p">,</span> <span class="s">&quot;Year&quot;</span><span class="p">,</span> <span class="s">&quot;Population&quot;</span><span class="p">)</span>
<span class="o">&gt;</span> dataCoords
            City State Latitude  Longitude Year Population
<span class="m">1</span>        Chicago    IL <span class="m">41.85003</span>  <span class="m">-87.65005</span> <span class="m">2012</span>    <span class="m">2714856</span>
<span class="m">2</span>       Columbus    GA <span class="m">32.46098</span>  <span class="m">-84.98771</span> <span class="m">2012</span>     <span class="m">198413</span>
<span class="m">3</span>       Columbus    OH <span class="m">39.96118</span>  <span class="m">-82.99879</span> <span class="m">2012</span>     <span class="m">809798</span>
<span class="m">4</span>       Columbus    OH <span class="m">39.96118</span>  <span class="m">-82.99879</span> <span class="m">2010</span>     <span class="m">787033</span>
<span class="m">5</span>    Los Angeles    CA <span class="m">34.05223</span> <span class="m">-118.24368</span> <span class="m">2012</span>    <span class="m">3857799</span>
<span class="m">6</span>       New York    NY <span class="m">40.71427</span>  <span class="m">-74.00597</span> <span class="m">2012</span>    <span class="m">8336697</span>
<span class="m">7</span>       New York    NY <span class="m">40.71427</span>  <span class="m">-74.00597</span> <span class="m">2010</span>    <span class="m">8175133</span>
<span class="m">8</span>  San Francisco    CA <span class="m">37.77823</span> <span class="m">-122.44250</span> <span class="m">2012</span>     <span class="m">825863</span>
<span class="m">9</span>  San Francisco    CA <span class="m">37.77823</span> <span class="m">-122.44250</span> <span class="m">2010</span>     <span class="m">805235</span>
<span class="m">10</span>       Houston    TX       <span class="kc">NA</span>         <span class="kc">NA</span> <span class="m">2012</span>    <span class="m">2160821</span>
</pre></div>


<p>The full sample code is available as <a href="https://gist.github.com/mollietaylor/8565624">a gist</a>.</p>
<h2>References</h2>
<ul>
<li><a href="https://stat.ethz.ch/pipermail/r-help/2006-August/111120.html">https://stat.ethz.ch/pipermail/r-help/2006-August/111120.html</a></li>
</ul>
		</div> <!--/#entry-content-->
    		<span class="tag-links"><strong>Tagged</strong>
 <a href="http://blog.mollietaylor.com/tag/completecases.html" rel="tag">complete.cases</a>,  <a href="http://blog.mollietaylor.com/tag/merge.html" rel="tag">merge</a>,  <a href="http://blog.mollietaylor.com/tag/r.html" rel="tag">R</a>    		</span>
	</div> <!--/#main-->
</div>  <!--/#post--><div class="post type-post status-publish format-standard hentry category-general" id="post">
	<div class="entry-meta">
		<div class="date"><a href="http://blog.mollietaylor.com/2014/02/ggplot-fit-line-and-lattice-fit-line-in.html">Thu 13 February 2014</a></div>
		<span class="byline">By <a href="http://blog.mollietaylor.com/author/mollie-taylor.html">Mollie Taylor</a></span>
			<span class="cat-links"><a href="http://blog.mollietaylor.com/category/r.html" title="View all posts in R" rel="category tag">R</a></span>
	</div> <!-- /#entry-meta -->
	<div class="main">
		<h2 class="entry-title">
			<a href="http://blog.mollietaylor.com/2014/02/ggplot-fit-line-and-lattice-fit-line-in.html" title="Permalink to ggplot Fit Line and Lattice Fit Line in R" rel="bookmark">ggplot Fit Line and Lattice Fit Line in R</a>
		</h2>
		<div class="entry-content">
			<p>Let's add a fit line to a scatterplot!</p>
<h2>Fit Line in Base Graphics</h2>
<p>Here's how to do it in <strong>base</strong> graphics:</p>
<div class="highlight"><pre>ols <span class="o">&lt;-</span> lm<span class="p">(</span>Temp <span class="o">~</span> Solar.R<span class="p">,</span>
    data <span class="o">=</span> airquality<span class="p">)</span>

<span class="kp">summary</span><span class="p">(</span>ols<span class="p">)</span>

plot<span class="p">(</span>Temp <span class="o">~</span> Solar.R<span class="p">,</span>
    data <span class="o">=</span> airquality<span class="p">)</span>
abline<span class="p">(</span>ols
</pre></div>


<p><img alt="Fit line in base graphics in R" src="http://blog.mollietaylor.com/images/ggplot-fit-line-base.png" /></p>
<h2>Fit Line in ggplot</h2>
<p>And here's how to do it in <strong>ggplot</strong>:</p>
<div class="highlight"><pre><span class="kn">library</span><span class="p">(</span>ggplot2<span class="p">)</span>
ggplot<span class="p">(</span>data <span class="o">=</span> airquality<span class="p">,</span>
        aes<span class="p">(</span>Solar.R<span class="p">,</span> Temp<span class="p">))</span> <span class="o">+</span> 
    geom_point<span class="p">(</span>pch <span class="o">=</span> <span class="m">19</span><span class="p">)</span> <span class="o">+</span> 
    geom_abline<span class="p">(</span>intercept <span class="o">=</span> ols<span class="o">$</span>coefficients<span class="p">[</span><span class="m">1</span><span class="p">],</span>
        slope <span class="o">=</span> ols<span class="o">$</span>coefficients<span class="p">[</span><span class="m">2</span><span class="p">])</span>
</pre></div>


<p>You can access the info from your regression results through <code>ols$coefficients</code>.</p>
<p>Edit: Thanks to an anonymous commenter, I have learned that you can simplify this by using <code>geom_smooth</code>.  This way you don't have to specify the intercept and slope of the fit line.</p>
<div class="highlight"><pre>ggplot<span class="p">(</span>data <span class="o">=</span> airquality<span class="p">,</span>
        aes<span class="p">(</span>Solar.R<span class="p">,</span> Temp<span class="p">))</span> <span class="o">+</span> 
    geom_point<span class="p">(</span>pch <span class="o">=</span> <span class="m">19</span><span class="p">)</span> <span class="o">+</span> 
    geom_smooth<span class="p">(</span>method <span class="o">=</span> lm<span class="p">,</span>
        se <span class="o">=</span> <span class="kc">FALSE</span><span class="p">)</span>
</pre></div>


<p><img alt="Fit line in ggplot in R" src="http://blog.mollietaylor.com/images/ggplot-fit-line-ggplot.png" /></p>
<h2>Fit Line in Lattice</h2>
<p>In <strong>lattice</strong>, it's even easier. You don't even need to run a regression; you can just add to the <code>type</code> option.</p>
<div class="highlight"><pre><span class="kn">library</span><span class="p">(</span>lattice<span class="p">)</span>

xyplot<span class="p">(</span>Temp <span class="o">~</span> Solar.R<span class="p">,</span>
    data <span class="o">=</span> airquality<span class="p">,</span>
    type <span class="o">=</span> <span class="kt">c</span><span class="p">(</span><span class="s">&quot;p&quot;</span><span class="p">,</span> <span class="s">&quot;r&quot;</span><span class="p">))</span>
</pre></div>


<p><img alt="Fit Line in Lattice in R" src="http://blog.mollietaylor.com/images/ggplot-fit-line-lattice.png" /></p>
<p>The code is available in <a href="https://gist.github.com/mollietaylor/8203926">a gist</a>.</p>
<h2>References</h2>
<ul>
<li><a href="http://stackoverflow.com/questions/12972039/plotting-xyplot-with-regression-line-on-lattice-graphics">http://stackoverflow.com/questions/12972039/plotting-xyplot-with-regression-line-on-lattice-graphics</a></li>
</ul>
		</div> <!--/#entry-content-->
    		<span class="tag-links"><strong>Tagged</strong>
 <a href="http://blog.mollietaylor.com/tag/geom_abline.html" rel="tag">geom_abline</a>,  <a href="http://blog.mollietaylor.com/tag/geom_smooth.html" rel="tag">geom_smooth</a>,  <a href="http://blog.mollietaylor.com/tag/ggplot2.html" rel="tag">ggplot2</a>,  <a href="http://blog.mollietaylor.com/tag/lattice.html" rel="tag">lattice</a>,  <a href="http://blog.mollietaylor.com/tag/lm.html" rel="tag">lm</a>,  <a href="http://blog.mollietaylor.com/tag/r.html" rel="tag">R</a>,  <a href="http://blog.mollietaylor.com/tag/type.html" rel="tag">type</a>    		</span>
	</div> <!--/#main-->
</div>  <!--/#post--><div class="post type-post status-publish format-standard hentry category-general" id="post">
	<div class="entry-meta">
		<div class="date"><a href="http://blog.mollietaylor.com/2014/02/compare-regression-results-to-specific.html">Thu 06 February 2014</a></div>
		<span class="byline">By <a href="http://blog.mollietaylor.com/author/mollie-taylor.html">Mollie Taylor</a></span>
			<span class="cat-links"><a href="http://blog.mollietaylor.com/category/r.html" title="View all posts in R" rel="category tag">R</a></span>
	</div> <!-- /#entry-meta -->
	<div class="main">
		<h2 class="entry-title">
			<a href="http://blog.mollietaylor.com/2014/02/compare-regression-results-to-specific.html" title="Permalink to Compare Regression Results to a Specific Factor Level in R" rel="bookmark">Compare Regression Results to a Specific Factor Level in R</a>
		</h2>
		<div class="entry-content">
			<p>Including a series of dummy variables in a regression in R is very simple. For example,</p>
<div class="highlight"><pre>ols <span class="o">&lt;-</span> lm<span class="p">(</span>weight <span class="o">~</span> Time <span class="o">+</span> Diet<span class="p">,</span>
    data <span class="o">=</span> ChickWeight<span class="p">)</span>
<span class="kp">summary</span><span class="p">(</span>ols<span class="p">)</span>
</pre></div>


<p>The above regression automatically includes a dummy variable for all but the first level of the factor of the <code>Diet</code> variable.</p>
<div class="highlight"><pre>Call<span class="o">:</span>
lm<span class="p">(</span>formula <span class="o">=</span> weight <span class="o">~</span> Time <span class="o">+</span> Diet<span class="p">,</span> data <span class="o">=</span> ChickWeight<span class="p">)</span>

Residuals<span class="o">:</span>
     Min       <span class="m">1</span>Q   Median       <span class="m">3</span>Q      Max 
<span class="m">-136.851</span>  <span class="m">-17.151</span>   <span class="m">-2.595</span>   <span class="m">15.033</span>  <span class="m">141.816</span>

Coefficients<span class="o">:</span>
            Estimate Std. Error t value Pr<span class="p">(</span><span class="o">&gt;|</span><span class="kp">t</span><span class="o">|</span><span class="p">)</span>    
<span class="p">(</span>Intercept<span class="p">)</span>  <span class="m">10.9244</span>     <span class="m">3.3607</span>   <span class="m">3.251</span>  <span class="m">0.00122</span> <span class="o">**</span> 
Time          <span class="m">8.7505</span>     <span class="m">0.2218</span>  <span class="m">39.451</span>  <span class="o">&lt;</span> <span class="m">2e-16</span> <span class="o">***</span>
Diet2        <span class="m">16.1661</span>     <span class="m">4.0858</span>   <span class="m">3.957</span> <span class="m">8.56e-05</span> <span class="o">***</span>
Diet3        <span class="m">36.4994</span>     <span class="m">4.0858</span>   <span class="m">8.933</span>  <span class="o">&lt;</span> <span class="m">2e-16</span> <span class="o">***</span>
Diet4        <span class="m">30.2335</span>     <span class="m">4.1075</span>   <span class="m">7.361</span> <span class="m">6.39e-13</span> <span class="o">***</span>
<span class="o">---</span>
Signif. codes<span class="o">:</span>  <span class="m">0</span> â€˜<span class="o">***</span>â€™ <span class="m">0.001</span> â€˜<span class="o">**</span>â€™ <span class="m">0.01</span> â€˜<span class="o">*</span>â€™ <span class="m">0.05</span> â€˜<span class="m">.</span>â€™ <span class="m">0.1</span> â€˜ â€™ <span class="m">1</span>

Residual standard error<span class="o">:</span> <span class="m">35.99</span> on <span class="m">573</span> degrees of freedom
Multiple R<span class="o">-</span>squared<span class="o">:</span>  <span class="m">0.7453</span><span class="p">,</span>  Adjusted R<span class="o">-</span>squared<span class="o">:</span>  <span class="m">0.7435</span> 
<span class="bp">F</span><span class="o">-</span>statistic<span class="o">:</span> <span class="m">419.2</span> on <span class="m">4</span> and <span class="m">573</span> DF<span class="p">,</span>  p<span class="o">-</span>value<span class="o">:</span> <span class="o">&lt;</span> <span class="m">2.2e-16</span>
</pre></div>


<p>This is great, and it's often what you want. But in this case, it's comparing each of the diets to Diet1. In some cases, you might want to compare to a specific diet that isn't the first in the factor list.</p>
<p>How can we choose which dummy to compare to? Fortunately, it's simple to compare to a specific dummy in R. We can just <code>relevel</code> the factor so the dummy we want to compare to is first.</p>
<div class="highlight"><pre>ChickWeight<span class="o">$</span>Diet <span class="o">&lt;-</span> relevel<span class="p">(</span>ChickWeight<span class="o">$</span>Diet<span class="p">,</span>
    ref <span class="o">=</span> <span class="m">4</span><span class="p">)</span>

olsRelevel <span class="o">&lt;-</span> lm<span class="p">(</span>weight <span class="o">~</span> Time <span class="o">+</span> Diet<span class="p">,</span>
    data <span class="o">=</span> ChickWeight<span class="p">)</span>
<span class="kp">summary</span><span class="p">(</span>olsRelevel<span class="p">)</span>
</pre></div>


<p>The <code>ref</code> argument allows us to change the reference level of the factor variable. This means that when we perform regression analysis</p>
<p>You can use <code>table</code> or <code>str</code> to find the factor levels, if you don't already know them.</p>
<p>After releveling the factor variable, we can simply perform the same regression again, and this time it will compare the results to the new reference level:</p>
<div class="highlight"><pre>olsRelevel <span class="o">&lt;-</span> lm<span class="p">(</span>weight <span class="o">~</span> Time <span class="o">+</span> Diet<span class="p">,</span>
    data <span class="o">=</span> ChickWeight<span class="p">)</span>
<span class="kp">summary</span><span class="p">(</span>olsRelevel<span class="p">)</span>

<span class="o">:::</span>r
Call<span class="o">:</span>
lm<span class="p">(</span>formula <span class="o">=</span> weight <span class="o">~</span> Time <span class="o">+</span> Diet<span class="p">,</span> data <span class="o">=</span> ChickWeight<span class="p">)</span>

Residuals<span class="o">:</span>
     Min       <span class="m">1</span>Q   Median       <span class="m">3</span>Q      Max 
<span class="m">-136.851</span>  <span class="m">-17.151</span>   <span class="m">-2.595</span>   <span class="m">15.033</span>  <span class="m">141.816</span>

Coefficients<span class="o">:</span>
            Estimate Std. Error t value Pr<span class="p">(</span><span class="o">&gt;|</span><span class="kp">t</span><span class="o">|</span><span class="p">)</span>    
<span class="p">(</span>Intercept<span class="p">)</span>  <span class="m">41.1578</span>     <span class="m">4.0828</span>  <span class="m">10.081</span>  <span class="o">&lt;</span> <span class="m">2e-16</span> <span class="o">***</span>
Time          <span class="m">8.7505</span>     <span class="m">0.2218</span>  <span class="m">39.451</span>  <span class="o">&lt;</span> <span class="m">2e-16</span> <span class="o">***</span>
Diet1       <span class="m">-30.2335</span>     <span class="m">4.1075</span>  <span class="m">-7.361</span> <span class="m">6.39e-13</span> <span class="o">***</span>
Diet2       <span class="m">-14.0674</span>     <span class="m">4.6665</span>  <span class="m">-3.015</span>  <span class="m">0.00269</span> <span class="o">**</span> 
Diet3         <span class="m">6.2660</span>     <span class="m">4.6665</span>   <span class="m">1.343</span>  <span class="m">0.17989</span>    
<span class="o">---</span>
Signif. codes<span class="o">:</span>  <span class="m">0</span> â€˜<span class="o">***</span>â€™ <span class="m">0.001</span> â€˜<span class="o">**</span>â€™ <span class="m">0.01</span> â€˜<span class="o">*</span>â€™ <span class="m">0.05</span> â€˜<span class="m">.</span>â€™ <span class="m">0.1</span> â€˜ â€™ <span class="m">1</span>

Residual standard error<span class="o">:</span> <span class="m">35.99</span> on <span class="m">573</span> degrees of freedom
Multiple R<span class="o">-</span>squared<span class="o">:</span>  <span class="m">0.7453</span><span class="p">,</span>  Adjusted R<span class="o">-</span>squared<span class="o">:</span>  <span class="m">0.7435</span> 
<span class="bp">F</span><span class="o">-</span>statistic<span class="o">:</span> <span class="m">419.2</span> on <span class="m">4</span> and <span class="m">573</span> DF<span class="p">,</span>  p<span class="o">-</span>value<span class="o">:</span> <span class="o">&lt;</span> <span class="m">2.2e-16</span>
</pre></div>


<p>Now we can choose any factor level as the reference for the series of dummies in the regression analysis. The code is available in <a href="https://gist.github.com/mollietaylor/8214220">a gist</a>.</p>
<h2>Reference</h2>
<ul>
<li><a href="http://stackoverflow.com/a/3872213/2926101">http://stackoverflow.com/a/3872213/2926101</a></li>
</ul>
		</div> <!--/#entry-content-->
    		<span class="tag-links"><strong>Tagged</strong>
 <a href="http://blog.mollietaylor.com/tag/lm.html" rel="tag">lm</a>,  <a href="http://blog.mollietaylor.com/tag/r.html" rel="tag">R</a>,  <a href="http://blog.mollietaylor.com/tag/relevel.html" rel="tag">relevel</a>    		</span>
	</div> <!--/#main-->
</div>  <!--/#post--><div class="post type-post status-publish format-standard hentry category-general" id="post">
	<div class="entry-meta">
		<div class="date"><a href="http://blog.mollietaylor.com/2014/02/lwimw3-trail-magic.html">Sun 02 February 2014</a></div>
		<span class="byline">By <a href="http://blog.mollietaylor.com/author/mollie-taylor.html">Mollie Taylor</a></span>
			<span class="cat-links"><a href="http://blog.mollietaylor.com/category/leaflet.html" title="View all posts in Leaflet" rel="category tag">Leaflet</a></span>
	</div> <!-- /#entry-meta -->
	<div class="main">
		<h2 class="entry-title">
			<a href="http://blog.mollietaylor.com/2014/02/lwimw3-trail-magic.html" title="Permalink to LWIMW3: Trail Magic" rel="bookmark">LWIMW3: Trail Magic</a>
		</h2>
		<div class="entry-content">
			<p>I just finished my submission for <a href="http://lookwhatimadeweekend.com/">Look What I Made Weekend 3</a>. Look What I Made Weekend (LWIMW) is a chance for people to create something over the course of 48 hours. The concept is based on <a href="http://www.ludumdare.com/">Ludum Dare</a> and other game jams, but for LWIMW you don't have to make a game. Instead, you are free to pursue any creative endeavor and show off your results at the end.</p>
<blockquote>
<p>NB: The content below is mostly a reprint of <a href="http://lookwhatimadeweekend.com/contest/3/submission/110/">my submission at LWIMW</a>.</p>
</blockquote>
<p>My project is an interactive website that will be part of the companion site to a book <a href="http://www.driven2divide.com/">my friend Scott Thigpen</a> is writing.
I didn't quite start from scratch on this project. This image shows the progress I had made before the weekend. You can also view it <a href="http://mollietaylor.com/trailmagic/preLWIMW-slide.html">on the web</a>.</p>
<p><img alt="pre-LWIMW" class="size-auto" src="http://blog.mollietaylor.com/images/pre-LWIMW.png" /></p>
<p>The other images show the current status after the weekend.</p>
<p>I made a lot of progress this weekend. I added GPS routes to the map, added a table of contents, added marker clustering, improved the graphic design (CSS and basemap), and added about 25% of the final content.</p>
<p><img alt="post-LWIMW" class="size-auto" src="http://blog.mollietaylor.com/images/post-LWIMW.png" /></p>
<p><img alt="post-LWIMW" class="size-auto" src="http://blog.mollietaylor.com/images/post-LWIMW-2.png" /></p>
<p>The only essential things I have left to do are adding the rest of the content, working with my friend on palette and graphics, and tweaking some small things.</p>
<p>You can view the current state of the <a href="http://mollietaylor.com/trailmagic/LWIMW.html">Trail Magic site here</a>.</p>
		</div> <!--/#entry-content-->
    		<span class="tag-links"><strong>Tagged</strong>
 <a href="http://blog.mollietaylor.com/tag/competitions.html" rel="tag">competitions</a>,  <a href="http://blog.mollietaylor.com/tag/javascript.html" rel="tag">Javascript</a>,  <a href="http://blog.mollietaylor.com/tag/jquery.html" rel="tag">jQuery</a>,  <a href="http://blog.mollietaylor.com/tag/leaflet.html" rel="tag">Leaflet</a>,  <a href="http://blog.mollietaylor.com/tag/lwimw.html" rel="tag">LWIMW</a>,  <a href="http://blog.mollietaylor.com/tag/slidemapper.html" rel="tag">slidemapper</a>    		</span>
	</div> <!--/#main-->
</div>  <!--/#post--><div class="navigation">
		<div class="nav-next"><a href="http://blog.mollietaylor.com/author/mollie-taylor2.html" >Older posts <span class="meta-nav">&rarr;</span></a></div>
</div>
		</div>
		
		<div id="footer">
			<p>Powered by <a href="http://getpelican.com">Pelican</a>, theme by <a href="http://bunnyman.info">tBunnyMan</a>.</p>
		</div><!-- /#footer -->
	</div><!-- /#container -->
	<div style="display:none"></div>
</body>
</html>