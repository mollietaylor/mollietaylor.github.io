<!DOCTYPE html>
<html lang="en">
<head>
		<title>Maps & Apps &mdash; Compare Regression Results to a Specific Factor Level in R</title>
		<meta charset="utf-8" />
		<link rel="profile" href="http://gmpg.org/xfn/11" />
		<link rel="stylesheet" type="text/css" href="/theme/css/style.css" />
		<link rel='stylesheet' id='oswald-css'  href='http://fonts.googleapis.com/css?family=Oswald&#038;ver=3.3.2' type='text/css' media='all' />
		<style type="text/css">
			body.custom-background { background-color: #f5f5f5; }
		</style>
		<link rel="alternate" type="application/atom+xml"
			title="Maps & Apps — Flux Atom"
			href="/" /> 
		<!--[if lte IE 8]><script src="/theme/js/html5shiv.js"></script><![endif]-->
</head>

<body class="home blog custom-background " >
	<div id="container">
		<div id="header">
				<h1 id="site-title"><a href="">Maps & Apps</a></h1>
		</div><!-- /#banner -->
		
		<div id="menu">
			<div class="menu-navigation-container">
				<ul id="menu-navigation" class="menu">
						<li class="menu-item menu-item-type-post_type menu-item-object-page"><a href="/pages/about/index.html">About Mollie</a></li>
						<li class="menu-item menu-item-type-post_type menu-item-object-page"><a href="/category/.html"></a></li>
						<li class="menu-item menu-item-type-post_type menu-item-object-page"><a href="/category/latex.html">LaTeX</a></li>
						<li class="menu-item menu-item-type-post_type menu-item-object-page"><a href="/category/leaflet.html">Leaflet</a></li>
						<li class="active" class="menu-item menu-item-type-post_type menu-item-object-page"><a href="/category/r.html">R</a></li>
						<li  class="active" class="menu-item menu-item-type-post_type menu-item-object-page"><a href="pages/about/">About Mollie</a></li>

				</ul>
			</div> <!--/#menu-navigation-container-->
		</div><!-- /#menu -->
		
		<div class="page-title">
		</div>
	
		<div id="contents">

<div class="post type-post status-publish format-standard hentry category-general" id="post">
	<div class="entry-meta">
		<div class="date"><a href="/2014/02/compare-regression-results-to-specific.html">Thu 06 February 2014</a></div>
		<span class="byline">By <a href="/author/mollie-taylor.html">Mollie Taylor</a></span>
			<span class="cat-links"><a href="/category/r.html" title="View all posts in R" rel="category tag">R</a></span>
	</div> <!-- /#entry-meta -->
	<div class="main">
		<h2 class="entry-title">
			<a href="/2014/02/compare-regression-results-to-specific.html" title="Permalink to Compare Regression Results to a Specific Factor Level in R" rel="bookmark">Compare Regression Results to a Specific Factor Level in R</a>
		</h2>
		<div class="entry-content">
			<p>Including a series of dummy variables in a regression in R is very simple. For example,</p>
<div class="highlight"><pre>ols <span class="o">&lt;-</span> lm<span class="p">(</span>weight <span class="o">~</span> Time <span class="o">+</span> Diet<span class="p">,</span>
    data <span class="o">=</span> ChickWeight<span class="p">)</span>
<span class="kp">summary</span><span class="p">(</span>ols<span class="p">)</span>
</pre></div>


<p>The above regression automatically includes a dummy variable for all but the first level of the factor of the <code>Diet</code> variable.</p>
<div class="highlight"><pre>Call<span class="o">:</span>
lm<span class="p">(</span>formula <span class="o">=</span> weight <span class="o">~</span> Time <span class="o">+</span> Diet<span class="p">,</span> data <span class="o">=</span> ChickWeight<span class="p">)</span>

Residuals<span class="o">:</span>
     Min       <span class="m">1</span>Q   Median       <span class="m">3</span>Q      Max 
<span class="m">-136.851</span>  <span class="m">-17.151</span>   <span class="m">-2.595</span>   <span class="m">15.033</span>  <span class="m">141.816</span>

Coefficients<span class="o">:</span>
            Estimate Std. Error t value Pr<span class="p">(</span><span class="o">&gt;|</span><span class="kp">t</span><span class="o">|</span><span class="p">)</span>    
<span class="p">(</span>Intercept<span class="p">)</span>  <span class="m">10.9244</span>     <span class="m">3.3607</span>   <span class="m">3.251</span>  <span class="m">0.00122</span> <span class="o">**</span> 
Time          <span class="m">8.7505</span>     <span class="m">0.2218</span>  <span class="m">39.451</span>  <span class="o">&lt;</span> <span class="m">2e-16</span> <span class="o">***</span>
Diet2        <span class="m">16.1661</span>     <span class="m">4.0858</span>   <span class="m">3.957</span> <span class="m">8.56e-05</span> <span class="o">***</span>
Diet3        <span class="m">36.4994</span>     <span class="m">4.0858</span>   <span class="m">8.933</span>  <span class="o">&lt;</span> <span class="m">2e-16</span> <span class="o">***</span>
Diet4        <span class="m">30.2335</span>     <span class="m">4.1075</span>   <span class="m">7.361</span> <span class="m">6.39e-13</span> <span class="o">***</span>
<span class="o">---</span>
Signif. codes<span class="o">:</span>  <span class="m">0</span> ‘<span class="o">***</span>’ <span class="m">0.001</span> ‘<span class="o">**</span>’ <span class="m">0.01</span> ‘<span class="o">*</span>’ <span class="m">0.05</span> ‘<span class="m">.</span>’ <span class="m">0.1</span> ‘ ’ <span class="m">1</span>

Residual standard error<span class="o">:</span> <span class="m">35.99</span> on <span class="m">573</span> degrees of freedom
Multiple R<span class="o">-</span>squared<span class="o">:</span>  <span class="m">0.7453</span><span class="p">,</span>  Adjusted R<span class="o">-</span>squared<span class="o">:</span>  <span class="m">0.7435</span> 
<span class="bp">F</span><span class="o">-</span>statistic<span class="o">:</span> <span class="m">419.2</span> on <span class="m">4</span> and <span class="m">573</span> DF<span class="p">,</span>  p<span class="o">-</span>value<span class="o">:</span> <span class="o">&lt;</span> <span class="m">2.2e-16</span>
</pre></div>


<p>This is great, and it's often what you want. But in this case, it's comparing each of the diets to Diet1. In some cases, you might want to compare to a specific diet that isn't the first in the factor list.</p>
<p>How can we choose which dummy to compare to? Fortunately, it's simple to compare to a specific dummy in R. We can just <code>relevel</code> the factor so the dummy we want to compare to is first.</p>
<div class="highlight"><pre>ChickWeight<span class="o">$</span>Diet <span class="o">&lt;-</span> relevel<span class="p">(</span>ChickWeight<span class="o">$</span>Diet<span class="p">,</span>
    ref <span class="o">=</span> <span class="m">4</span><span class="p">)</span>

olsRelevel <span class="o">&lt;-</span> lm<span class="p">(</span>weight <span class="o">~</span> Time <span class="o">+</span> Diet<span class="p">,</span>
    data <span class="o">=</span> ChickWeight<span class="p">)</span>
<span class="kp">summary</span><span class="p">(</span>olsRelevel<span class="p">)</span>
</pre></div>


<p>The <code>ref</code> argument allows us to change the reference level of the factor variable. This means that when we perform regression analysis</p>
<p>You can use <code>table</code> or <code>str</code> to find the factor levels, if you don't already know them.</p>
<p>After releveling the factor variable, we can simply perform the same regression again, and this time it will compare the results to the new reference level:</p>
<div class="highlight"><pre>olsRelevel <span class="o">&lt;-</span> lm<span class="p">(</span>weight <span class="o">~</span> Time <span class="o">+</span> Diet<span class="p">,</span>
    data <span class="o">=</span> ChickWeight<span class="p">)</span>
<span class="kp">summary</span><span class="p">(</span>olsRelevel<span class="p">)</span>

<span class="o">:::</span>r
Call<span class="o">:</span>
lm<span class="p">(</span>formula <span class="o">=</span> weight <span class="o">~</span> Time <span class="o">+</span> Diet<span class="p">,</span> data <span class="o">=</span> ChickWeight<span class="p">)</span>

Residuals<span class="o">:</span>
     Min       <span class="m">1</span>Q   Median       <span class="m">3</span>Q      Max 
<span class="m">-136.851</span>  <span class="m">-17.151</span>   <span class="m">-2.595</span>   <span class="m">15.033</span>  <span class="m">141.816</span>

Coefficients<span class="o">:</span>
            Estimate Std. Error t value Pr<span class="p">(</span><span class="o">&gt;|</span><span class="kp">t</span><span class="o">|</span><span class="p">)</span>    
<span class="p">(</span>Intercept<span class="p">)</span>  <span class="m">41.1578</span>     <span class="m">4.0828</span>  <span class="m">10.081</span>  <span class="o">&lt;</span> <span class="m">2e-16</span> <span class="o">***</span>
Time          <span class="m">8.7505</span>     <span class="m">0.2218</span>  <span class="m">39.451</span>  <span class="o">&lt;</span> <span class="m">2e-16</span> <span class="o">***</span>
Diet1       <span class="m">-30.2335</span>     <span class="m">4.1075</span>  <span class="m">-7.361</span> <span class="m">6.39e-13</span> <span class="o">***</span>
Diet2       <span class="m">-14.0674</span>     <span class="m">4.6665</span>  <span class="m">-3.015</span>  <span class="m">0.00269</span> <span class="o">**</span> 
Diet3         <span class="m">6.2660</span>     <span class="m">4.6665</span>   <span class="m">1.343</span>  <span class="m">0.17989</span>    
<span class="o">---</span>
Signif. codes<span class="o">:</span>  <span class="m">0</span> ‘<span class="o">***</span>’ <span class="m">0.001</span> ‘<span class="o">**</span>’ <span class="m">0.01</span> ‘<span class="o">*</span>’ <span class="m">0.05</span> ‘<span class="m">.</span>’ <span class="m">0.1</span> ‘ ’ <span class="m">1</span>

Residual standard error<span class="o">:</span> <span class="m">35.99</span> on <span class="m">573</span> degrees of freedom
Multiple R<span class="o">-</span>squared<span class="o">:</span>  <span class="m">0.7453</span><span class="p">,</span>  Adjusted R<span class="o">-</span>squared<span class="o">:</span>  <span class="m">0.7435</span> 
<span class="bp">F</span><span class="o">-</span>statistic<span class="o">:</span> <span class="m">419.2</span> on <span class="m">4</span> and <span class="m">573</span> DF<span class="p">,</span>  p<span class="o">-</span>value<span class="o">:</span> <span class="o">&lt;</span> <span class="m">2.2e-16</span>
</pre></div>


<p>Now we can choose any factor level as the reference for the series of dummies in the regression analysis. The code is available in <a href="https://gist.github.com/mollietaylor/8214220">a gist</a>.</p>
<h2>Reference</h2>
<ul>
<li><a href="http://stackoverflow.com/a/3872213/2926101">http://stackoverflow.com/a/3872213/2926101</a></li>
</ul>
		</div> <!--/#entry-content-->
    		<span class="tag-links"><strong>Tagged</strong>
 <a href="/tag/lm.html" rel="tag">lm</a>,  <a href="/tag/r.html" rel="tag">R</a>,  <a href="/tag/relevel.html" rel="tag">relevel</a>    		</span>
	</div> <!--/#main-->
</div>  <!--/#post-->

		</div>
		
		<div id="footer">
			<p>Powered by <a href="http://getpelican.com">Pelican</a>, theme by <a href="http://bunnyman.info">tBunnyMan</a>.</p>
		</div><!-- /#footer -->
	</div><!-- /#container -->
	<div style="display:none"></div>
</body>
</html>